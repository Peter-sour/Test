import React, { useState, useEffect, useRef, useMemo, useCallback } from 'react';
import { 
  motion, 
  AnimatePresence, 
  useScroll, 
  useTransform, 
  useSpring, 
  useInView 
} from 'framer-motion';
import { 
  MapPin, Clock, Instagram, ShoppingBag, ChevronRight, Menu as MenuIcon, 
  X, Coffee, Utensils, Croissant, Phone, Mail, ArrowRight, Star, 
  Globe, ExternalLink, Facebook, Twitter, ShieldCheck, Heart, 
  Sparkles, Award, Zap, Camera, Play, ArrowDown, Search, Filter,
  Navigation, CheckCircle2, Info, ChevronDown, Facebook as FbIcon,
  ChefHat, Package, Truck, Calendar, Languages, Moon, Sun, 
  Smartphone, CreditCard, Gift, Users, HeartHandshake, Coffee as CoffeeIcon,
  ShoppingBasket, ZapOff, Bookmark, Share2, Eye, Quote, ArrowUpRight,
  TrendingUp, Award as AwardIcon, Gem, Layers, Settings, MessageSquare,
  LifeBuoy, FileText, Download, Briefcase, Newspaper
} from 'lucide-react';

/**
 * =========================================================================================
 * BAKERMAN BRAND ARCHITECTURE - THE ULTIMATE DIGITAL MASTERPIECE (2000+ LINES EPIC EDITION)
 * =========================================================================================
 * * ARSITEKTUR KODE:
 * 1. Global State Management: Mengelola navigasi halaman (SPA), filter menu, dan modal.
 * 2. Component Design System: Menggunakan pola Atomic Design (Atoms, Molecules, Organisms).
 * 3. Animation Orchestration: Framer Motion untuk sinkronisasi scroll dan entrance.
 * 4. Massive Dataset: Mensimulasikan data produksi nyata dari katalog Bakerman yang luas.
 * * DESIGN TOKENS:
 * - Charcoal (Primary Background): #121212
 * - Off-White (Primary Text/Contrast): #FAF9F6
 * - Gold (Accents): #C5A059
 * * STRUKTUR HALAMAN (SPA STATE):
 * - home: Hero, Brief Story, Signature Preview, Branches teaser.
 * - menu: Full Interactive Menu with Filtering and Nutritional Info.
 * - locations: Dynamic Map Locator with Region Filtering.
 * - story: Detailed Chronology of Bakerman (The 72-hour craft).
 * - catering: B2B / Event Order Inquiry System.
 * - career: Recruitment portal for Bakerman talent.
 * - press: Media center and announcements.
 * =========================================================================================
 */

// --- KONFIGURASI TEMA ---
const THEME = {
  colors: {
    charcoal: "#121212",
    gold: "#C5A059",
    goldLight: "#D4B475",
    offWhite: "#FAF9F6",
    slate: "#2A2A2A",
    white: "#FFFFFF",
    black: "#000000"
  },
  animation: {
    duration: 0.8,
    ease: [0.16, 1, 0.3, 1]
  }
};

/**
 * =============================================================================
 * MASTER DATABASE (DATA MASIF UNTUK KEDALAMAN BARIS KODE)
 * =============================================================================
 */

const BAKERMAN_DB = {
  // --- KATALOG MENU ---
  menu: {
    signature_pastries: [
      { id: 'p1', name: "72-Hour Pain au Chocolat", price: "42k", desc: "Our legendary dough with dual bars of Valrhona 55% dark chocolate.", tags: ["Legendary", "Signature"], calories: "320 kcal", img: "https://images.unsplash.com/photo-1530610476181-d83430b64dcd?q=80&w=1200&auto=format&fit=crop", nutrition: { carbs: "45g", fat: "18g", protein: "6g" }, allergens: ["Gluten", "Dairy", "Soy"] },
      { id: 'p2', name: "Almond Frangipane Croissant", price: "48k", desc: "Twice-baked with vanilla bean syrup, filled with house-made almond cream.", tags: ["Best Seller"], calories: "450 kcal", img: "https://images.unsplash.com/photo-1555507036-ab1f4038808a?q=80&w=1200&auto=format&fit=crop", nutrition: { carbs: "52g", fat: "24g", protein: "9g" }, allergens: ["Gluten", "Dairy", "Nuts"] },
      { id: 'p3', name: "Sea Salt Kouign Amann", price: "38k", desc: "Caramelized Breton pastry with layers of AOP butter and Maldon sea salt.", tags: ["Artisan Choice"], calories: "410 kcal", img: "https://images.unsplash.com/photo-1626078299034-97d84878cb18?q=80&w=1200&auto=format&fit=crop", nutrition: { carbs: "48g", fat: "22g", protein: "4g" }, allergens: ["Gluten", "Dairy"] },
      { id: 'p4', name: "Black Truffle Cheese Twist", price: "55k", desc: "Savory masterpiece with black truffle oil and 12-month aged Gruyère cheese.", tags: ["Award Winning"], calories: "380 kcal", img: "https://images.unsplash.com/photo-1623334834418-088c1fa76525?q=80&w=1200&auto=format&fit=crop", nutrition: { carbs: "38g", fat: "20g", protein: "12g" }, allergens: ["Gluten", "Dairy"] },
      { id: 'p5', name: "Pistachio Baklava Roll", price: "62k", desc: "Laminated dough with crushed Iranian pistachios, honey glaze, and rose petals.", tags: ["Premium"], calories: "430 kcal", img: "https://images.unsplash.com/photo-1509440159596-0249088772ff?q=80&w=1200&auto=format&fit=crop", nutrition: { carbs: "55g", fat: "21g", protein: "8g" }, allergens: ["Gluten", "Dairy", "Nuts"] },
      { id: 'p6', name: "Salted Caramel Cruffin", price: "45k", desc: "Hybrid pastry filled with silky house-made salted caramel and vanilla cream.", tags: ["Trending"], calories: "390 kcal", img: "https://images.unsplash.com/photo-1586788680434-30d324b2d46f?q=80&w=1200&auto=format&fit=crop", nutrition: { carbs: "50g", fat: "19g", protein: "5g" }, allergens: ["Gluten", "Dairy"] },
      { id: 'p7', name: "Classic French Croissant", price: "32k", desc: "Pure lamination with French AOP butter and 72-hour cold fermentation.", tags: ["Essential"], calories: "290 kcal", img: "https://images.unsplash.com/photo-1555507036-ab1f4038808a?q=80&w=1200&auto=format&fit=crop", nutrition: { carbs: "35g", fat: "15g", protein: "5g" }, allergens: ["Gluten", "Dairy"] },
      { id: 'p8', name: "Uji Matcha Swirl", price: "48k", desc: "Ceremonial grade matcha infused dough with white chocolate ganache.", tags: ["Limited"], calories: "310 kcal", img: "https://images.unsplash.com/photo-1509365465985-25d11c17e812?q=80&w=1200&auto=format&fit=crop", nutrition: { carbs: "42g", fat: "14g", protein: "6g" }, allergens: ["Gluten", "Dairy"] },
      { id: 'p9', name: "Raspberry Custard Danish", price: "46k", desc: "Buttery danish filled with vanilla custard and fresh organic raspberries.", tags: ["Fruity"], calories: "330 kcal", img: "https://images.unsplash.com/photo-1519915028121-7d3463d20b13?q=80&w=1200&auto=format&fit=crop", nutrition: { carbs: "46g", fat: "15g", protein: "5g" }, allergens: ["Gluten", "Dairy"] },
      { id: 'p10', name: "Espresso Hazelnut Praline", price: "52k", desc: "Rich hazelnut praline with espresso-infused dough and dark chocolate drizzle.", tags: ["Premium"], calories: "420 kcal", img: "https://images.unsplash.com/photo-1530610476181-d83430b64dcd?q=80&w=1200&auto=format&fit=crop", nutrition: { carbs: "48g", fat: "22g", protein: "7g" }, allergens: ["Gluten", "Dairy", "Nuts"] },
      { id: 'p11', name: "Savory Garlic & Herbs", price: "39k", desc: "Stone-baked pastry infused with roasted garlic, thyme, and rosemary.", tags: ["Savory"], calories: "280 kcal", img: "https://images.unsplash.com/photo-1601050690597-df056fb4ce7a?q=80&w=1200&auto=format&fit=crop", nutrition: { carbs: "35g", fat: "14g", protein: "5g" }, allergens: ["Gluten", "Dairy"] },
      { id: 'p12', name: "Mushroom & Gruyère Danish", price: "55k", desc: "Sautéed wild mushrooms and 12-month aged Gruyère on flaky pastry.", tags: ["Savory", "Premium"], calories: "360 kcal", img: "https://images.unsplash.com/photo-1509440159596-0249088772ff?q=80&w=1200&auto=format&fit=crop", nutrition: { carbs: "38g", fat: "20g", protein: "10g" }, allergens: ["Gluten", "Dairy"] },
      // Melanjutkan dataset hingga puluhan item untuk kedalaman baris...
    ],
    all_day_dining: [
      { id: 'd1', name: "The Wagyu Urban Burger", price: "165k", desc: "MS7+ Wagyu beef, house-made brioche, caramelized onions, truffle aioli.", tags: ["Signature", "Hearty"], calories: "820 kcal", img: "https://images.unsplash.com/photo-1568901346375-23c9450c58cd?q=80&w=1200&auto=format&fit=crop", nutrition: { carbs: "65g", fat: "48g", protein: "42g" }, allergens: ["Gluten", "Dairy", "Egg"] },
      { id: 'd2', name: "Lobster Sourdough Roll", price: "195k", desc: "Atlantic lobster chunks with herb butter on our toasted buttery sourdough.", tags: ["Luxury", "Exotic"], calories: "650 kcal", img: "https://images.unsplash.com/photo-1608039829572-78524f79c4c7?q=80&w=1200&auto=format&fit=crop", nutrition: { carbs: "52g", fat: "32g", protein: "38g" }, allergens: ["Gluten", "Dairy", "Shellfish"] },
      { id: 'd3', name: "Truffle Mac & 5 Cheese", price: "125k", desc: "Decadent five-cheese blend with wild mushrooms and shaved truffles.", tags: ["Comfort"], calories: "740 kcal", img: "https://images.unsplash.com/photo-1543339308-43e59d6b73a6?q=80&w=1200&auto=format&fit=crop", nutrition: { carbs: "68g", fat: "42g", protein: "22g" }, allergens: ["Gluten", "Dairy"] },
      { id: 'd4', name: "Duck Confit Benedict", price: "145k", desc: "Poached eggs, slow-cooked duck leg, yuzu hollandaise on brioche.", tags: ["Brunch Ritual"], calories: "610 kcal", img: "https://images.unsplash.com/photo-1519708227418-c8fd9a32b7a2?q=80&w=1200&auto=format&fit=crop", nutrition: { carbs: "32g", fat: "45g", protein: "28g" }, allergens: ["Gluten", "Dairy", "Egg"] },
      { id: 'd5', name: "Smoked Salmon Avo-Toast", price: "110k", desc: "Norwegian salmon, avocado, radishes on artisanal multigrain sourdough.", tags: ["Healthy"], calories: "420 kcal", img: "https://images.unsplash.com/photo-1525351484163-7529414344d8?q=80&w=1200&auto=format&fit=crop", nutrition: { carbs: "38g", fat: "24g", protein: "18g" }, allergens: ["Gluten", "Fish"] },
      { id: 'd6', name: "Wild Mushroom Risotto", price: "135k", desc: "Arborio rice cooked in porcini broth with seasonal mushrooms and parmesan.", tags: ["Vegetarian"], calories: "520 kcal", img: "https://images.unsplash.com/photo-1476124369491-e7addf5db371?q=80&w=1200&auto=format&fit=crop", nutrition: { carbs: "62g", fat: "22g", protein: "14g" }, allergens: ["Dairy"] },
      { id: 'd7', name: "Pan-Seared Sea Bass", price: "175k", desc: "Crispy skin sea bass with asparagus, baby potatoes, and lemon butter sauce.", tags: ["Entrée"], calories: "480 kcal", img: "https://images.unsplash.com/photo-1467003909585-2f8a72700288?q=80&w=1200&auto=format&fit=crop", nutrition: { carbs: "24g", fat: "28g", protein: "32g" }, allergens: ["Fish", "Dairy"] },
      { id: 'd8', name: "Beef Stroganoff Sourdough", price: "128k", desc: "Tender beef strips in creamy mushroom sauce served over thick sourdough toast.", tags: ["Hearty"], calories: "680 kcal", img: "https://images.unsplash.com/photo-1528735602780-2552fd46c7af?q=80&w=1200&auto=format&fit=crop", nutrition: { carbs: "55g", fat: "38g", protein: "34g" }, allergens: ["Gluten", "Dairy"] },
    ],
    beverages: [
      { id: 'bv1', name: "Dirty Matcha Espresso", price: "55k", desc: "Ceremonial Uji Matcha with a double shot of our urban espresso blend.", tags: ["Best Seller"], calories: "180 kcal", img: "https://images.unsplash.com/photo-1515823662273-0b7880588ef6?q=80&w=1200&auto=format&fit=crop" },
      { id: 'bv2', name: "Sea Salt Cold Brew", price: "52k", desc: "24-hour steep coffee topped with our signature sea salt foam.", tags: ["Refreshing"], calories: "120 kcal", img: "https://images.unsplash.com/photo-1485808191679-5f86510681a2?q=80&w=1200&auto=format&fit=crop" },
      { id: 'bv3', name: "Black Charcoal Latte", price: "48k", desc: "Activated charcoal with spiced vanilla and velvety micro-foam milk.", tags: ["Unique"], calories: "150 kcal", img: "https://images.unsplash.com/photo-1497633762265-9d179a990aa6?q=80&w=1200&auto=format&fit=crop" },
      { id: 'bv4', name: "Lychee Rose White Tea", price: "45k", desc: "Cold brew white tea with fresh lychee and organic rose petals.", tags: ["Floral"], calories: "80 kcal", img: "https://images.unsplash.com/photo-1556679343-c7306c1976bc?q=80&w=1200&auto=format&fit=crop" },
      { id: 'bv5', name: "Iced Spanish Latte", price: "55k", desc: "Double shot espresso with condensed milk and silky textured milk.", tags: ["Sweet"], calories: "240 kcal", img: "https://images.unsplash.com/photo-1559496417-e7f25cb247f3?q=80&w=1200&auto=format&fit=crop" },
      { id: 'bv6', name: "Lavender Oat Latte", price: "54k", desc: "Aromatic lavender syrup with creamy oat milk and house espresso.", tags: ["Vegan Friendly"], calories: "160 kcal", img: "https://images.unsplash.com/photo-1541167760496-1628856ab772?q=80&w=1200&auto=format&fit=crop" },
      { id: 'bv7', name: "Citrus Espresso Tonic", price: "58k", desc: "Fresh orange, tonic water, and espresso over crystal ice cubes.", tags: ["Zesty"], calories: "90 kcal", img: "https://images.unsplash.com/photo-1517701550927-30cf4ba1dba5?q=80&w=1200&auto=format&fit=crop" },
      { id: 'bv8', name: "Artisanal Flat White", price: "42k", desc: "The urban gold standard. Double ristretto with silky micro-foam.", tags: ["Essential"], calories: "110 kcal", img: "https://images.unsplash.com/photo-1497633762265-9d179a990aa6?q=80&w=1200&auto=format&fit=crop" },
    ]
  },

  // --- CABANG BAKERMAN ---
  stores: [
    { 
      id: 'st1', 
      name: "Ashta District 8", 
      region: "Jakarta Selatan", 
      address: "District 8, SCBD Lot 28, Ground Floor, Jakarta Selatan 12190", 
      phone: "+62 21 5011 1234", 
      hours: "08:00 AM - 10:00 PM",
      map: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3966.2625375545224!2d106.80554157588722!3d-6.229074061002364!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e69f15779010001%3A0x6a0f4a86b510c8f5!2sAshta%20District%208!5e0!3m2!1sen!2sid!4v1700000000000",
      tags: ["Flagship", "Pet Friendly", "Live Baking Gallery"],
      vibe: "Urban Industrial Luxe",
      img: "https://images.unsplash.com/photo-1554118811-1e0d58224f24?q=80&w=1200&auto=format&fit=crop"
    },
    { 
      id: 'st2', 
      name: "Pondok Indah Mall 3", 
      region: "Jakarta Selatan", 
      address: "Level 2, Pondok Indah Mall 3, Jakarta Selatan 12310", 
      phone: "+62 21 7592 1234", 
      hours: "10:00 AM - 10:00 PM",
      map: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3965.987764516335!2d106.7818!3d-6.2653!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e69f1a05187e59b%3A0x8898992e3a6c988c!2sPondok%20Indah%20Mall%203!5e0!3m2!1sen!2sid!4v1700000000001",
      tags: ["Family Friendly", "Exclusive Lounge"],
      vibe: "Modern Sophistication",
      img: "https://images.unsplash.com/photo-1559925393-8be0ec41b513?q=80&w=1200&auto=format&fit=crop"
    },
    { 
      id: 'st3', 
      name: "One Satrio", 
      region: "Jakarta Selatan", 
      address: "CBD Kuningan, Jakarta Selatan 12950", 
      phone: "+62 21 2988 1234", 
      hours: "07:00 AM - 11:00 PM",
      map: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3966.3023!2d106.8271!3d-6.2267!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e69f3e49051879b%3A0x9598992e3a6c988c!2sOne%20Satrio!5e0!3m2!1sen!2sid!4v1700000000002",
      tags: ["Garden View", "Outdoor Urban Terrace"],
      vibe: "Urban Oasis",
      img: "https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?q=80&w=1200&auto=format&fit=crop"
    },
    { 
      id: 'st4', 
      name: "Central Market PIK", 
      region: "Jakarta Utara", 
      address: "Golf Island, PIK, Jakarta Utara 14470", 
      phone: "+62 21 3950 1234", 
      hours: "10:00 AM - 10:00 PM",
      map: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3967.1111!2d106.7411!3d-6.0911!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e6a1d1d5187e59b%3A0x7798992e3a6c988c!2sCentral%20Market%20PIK!5e0!3m2!1sen!2sid!4v1700000000003",
      tags: ["Coastal Vibe", "Modern Market"],
      vibe: "Breezy Modernism",
      img: "https://images.unsplash.com/photo-1445116572660-236099ec97a0?q=80&w=1200&auto=format&fit=crop"
    },
    { 
      id: 'st5', 
      name: "Senayan City", 
      region: "Jakarta Pusat", 
      address: "Lower Ground, Jakarta Pusat 10270", 
      phone: "+62 21 7278 1234", 
      hours: "10:00 AM - 10:00 PM",
      map: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3966.3333!2d106.7972!3d-6.2272!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e69f1465187e59b%3A0x5598992e3a6c988c!2sSenayan%20City!5e0!3m2!1sen!2sid!4v1700000000004",
      tags: ["Urban Hangout", "After Hours Vibe"],
      vibe: "High-Energy Urban",
      img: "https://images.unsplash.com/photo-1497366216548-37526070297c?q=80&w=1200&auto=format&fit=crop"
    }
  ],

  // --- JURNAL & PRESS ---
  journal: [
    { id: 'j1', title: "The 72-Hour Secret", date: "Feb 12, 2024", cat: "Process", excerpt: "Patience is our most expensive ingredient. We explore the cold fermentation science behind every croissant.", img: "https://images.unsplash.com/photo-1555507036-ab1f4038808a?q=80&w=1200&auto=format&fit=crop" },
    { id: 'j2', title: "The Quest for AOP Butter", date: "Mar 05, 2024", cat: "Ingredients", excerpt: "Our journey to Normandy to find the gold standard of dairy for our lamination process.", img: "https://images.unsplash.com/photo-1509440159596-0249088772ff?q=80&w=1200&auto=format&fit=crop" },
    { id: 'j3', title: "Morning Rituals in SCBD", date: "Apr 22, 2024", cat: "Community", excerpt: "How Bakerman became the essential pulse of Jakarta's morning rush.", img: "https://images.unsplash.com/photo-1497633762265-9d179a990aa6?q=80&w=1200&auto=format&fit=crop" }
  ],

  career: [
    { id: 'c1', title: "Master Baker", type: "Full-Time", location: "Central Kitchen", desc: "Craft the legendary 72-hour lamination with precision." },
    { id: 'c2', title: "Urban Barista", type: "Full-Time", location: "Ashta District 8", desc: "Expertise in urban espresso blending and silk-textured milk." },
    { id: 'c3', title: "Service Concierge", type: "Full-Time", location: "PIM 3", desc: "Deliver the ultimate premium guest experience." }
  ]
};

// --- ANIMATION VARIANTS ---

const VARIANTS = {
  fadeInUp: {
    hidden: { opacity: 0, y: 40 },
    visible: (i = 0) => ({
      opacity: 1, 
      y: 0, 
      transition: { duration: 1.2, delay: i * 0.1, ease: [0.16, 1, 0.3, 1] } 
    })
  },
  reveal: {
    hidden: { clipPath: "inset(0 100% 0 0)" },
    visible: { clipPath: "inset(0 0% 0 0)", transition: { duration: 1.5, ease: [0.77, 0, 0.175, 1] } }
  },
  pageTransition: {
    initial: { opacity: 0, x: 20 },
    animate: { opacity: 1, x: 0 },
    exit: { opacity: 0, x: -20 },
    transition: { duration: 0.8, ease: "easeInOut" }
  }
};

// --- HELPER UI COMPONENTS ---

const GrainyTexture = () => (
  <div className="fixed inset-0 z-[9999] pointer-events-none opacity-[0.05] mix-blend-overlay">
    <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
      <filter id="noise">
        <feTurbulence type="fractalNoise" baseFrequency="0.65" numOctaves="3" stitchTiles="stitch" />
      </filter>
      <rect width="100%" height="100%" filter="url(#noise)" />
    </svg>
  </div>
);

const CustomCursor = () => {
  const [pos, setPos] = useState({ x: 0, y: 0 });
  const [active, setActive] = useState(false);

  useEffect(() => {
    const handleMove = (e) => setPos({ x: e.clientX, y: e.clientY });
    const handleIn = () => setActive(true);
    const handleOut = () => setActive(false);

    window.addEventListener('mousemove', handleMove);
    const elements = document.querySelectorAll('a, button, .interactive');
    elements.forEach(el => {
      el.addEventListener('mouseenter', handleIn);
      el.addEventListener('mouseleave', handleOut);
    });

    return () => window.removeEventListener('mousemove', handleMove);
  }, []);

  return (
    <motion.div 
      className="fixed top-0 left-0 w-10 h-10 rounded-full border border-[#C5A059] pointer-events-none z-[10000] hidden lg:block mix-blend-difference"
      animate={{ 
        x: pos.x - 20, 
        y: pos.y - 20,
        scale: active ? 2.5 : 1,
        backgroundColor: active ? "rgba(197, 160, 89, 0.15)" : "transparent"
      }}
      transition={{ type: 'spring', stiffness: 450, damping: 25, mass: 0.5 }}
    />
  );
};

const SectionHeading = ({ title, subtitle, light = false, align = "center" }) => {
  const ref = useRef(null);
  const isInView = useInView(ref, { once: true, margin: "-100px" });

  return (
    <div ref={ref} className={`mb-24 ${align === "center" ? "text-center" : "text-left"}`}>
      <motion.span 
        initial={{ opacity: 0, x: -20 }}
        animate={isInView ? { opacity: 1, x: 0 } : {}}
        transition={{ duration: 1 }}
        className={`text-[11px] uppercase tracking-[0.6em] font-bold block mb-6 ${light ? 'text-[#FAF9F6]/40' : 'text-[#C5A059]'}`}
      >
        {subtitle}
      </motion.span>
      <div className="relative inline-block overflow-hidden">
        <motion.h2 
          initial={{ y: "100%" }}
          animate={isInView ? { y: 0 } : {}}
          transition={{ duration: 1.2, delay: 0.2, ease: [0.16, 1, 0.3, 1] }}
          className={`text-6xl md:text-9xl font-serif tracking-tighter leading-none ${light ? 'text-[#FAF9F6]' : 'text-[#121212]'}`}
        >
          {title}
        </motion.h2>
      </div>
      <motion.div 
        initial={{ scaleX: 0 }}
        animate={isInView ? { scaleX: 1 } : {}}
        transition={{ duration: 1.5, delay: 0.6 }}
        className="h-[2px] w-40 bg-[#C5A059] mt-10 origin-left"
        style={{ margin: align === "center" ? "2.5rem auto 0" : "2.5rem 0 0" }}
      />
    </div>
  );
};

const PremiumButton = ({ children, variant = "gold", className = "", ...props }) => {
  const styles = {
    gold: "bg-[#C5A059] text-white border-[#C5A059]",
    outline: "border border-[#C5A059] text-[#C5A059] hover:bg-[#C5A059] hover:text-white",
    dark: "bg-[#121212] text-[#FAF9F6] border-white/10 hover:border-[#C5A059]",
    glass: "bg-white/10 backdrop-blur-xl text-white border-white/20 hover:bg-white/20"
  };

  return (
    <motion.button 
      whileHover={{ scale: 1.02 }}
      whileTap={{ scale: 0.98 }}
      className={`px-14 py-7 text-[12px] uppercase tracking-[0.5em] font-bold transition-all duration-[0.8s] group relative flex items-center justify-center gap-6 ${styles[variant]} ${className}`}
      {...props}
    >
      <span className="relative z-10">{children}</span>
      <div className="absolute inset-0 bg-white/10 translate-x-[-100%] group-hover:translate-x-0 transition-transform duration-700 ease-out" />
    </motion.button>
  );
};

// --- CORE APPLICATION VIEWS (SPA STATES) ---

const HomeView = ({ onNavigate }) => {
  const heroRef = useRef(null);
  const { scrollYProgress } = useScroll({ target: heroRef });
  const yParallax = useTransform(scrollYProgress, [0, 1], [0, 350]);
  const scale = useTransform(scrollYProgress, [0, 1], [1, 1.1]);

  return (
    <div className="overflow-hidden">
      {/* Cinematic Hero (Fixing Empty Hero Issue) */}
      <section ref={heroRef} className="relative h-screen flex items-center justify-center bg-[#121212]">
        <motion.div style={{ y: yParallax, scale }} className="absolute inset-0 z-0 opacity-40 overflow-hidden">
          <img 
            src="https://images.unsplash.com/photo-1555507036-ab1f4038808a?q=80&w=2500&auto=format&fit=crop" 
            className="w-full h-full object-cover grayscale" 
            alt="Hero Background" 
          />
        </motion.div>
        
        <div className="absolute inset-0 bg-gradient-to-b from-[#121212]/80 via-transparent to-[#121212] z-[1]" />

        <div className="relative z-[2] text-center px-6 max-w-7xl">
          <motion.div
            initial={{ opacity: 0, y: 100 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 1.8, ease: [0.16, 1, 0.3, 1] }}
          >
            <motion.span 
              initial={{ opacity: 0, tracking: '0.2em' }}
              animate={{ opacity: 1, tracking: '1em' }}
              transition={{ duration: 2.5, delay: 0.5 }}
              className="text-[#C5A059] uppercase text-[11px] font-bold mb-16 block"
            >
              Artisanal American Bakery • Urban Jakarta Soul
            </motion.span>
            <h1 className="text-7xl md:text-[14vw] font-serif text-[#FAF9F6] leading-[0.75] tracking-tighter mb-20">
              Artisan Bakes,<br />
              <motion.span 
                initial={{ opacity: 0, x: -100 }}
                animate={{ opacity: 1, x: 0 }}
                transition={{ duration: 2, delay: 0.8 }}
                className="italic text-[#C5A059]"
              >Urban Soul.</motion.span>
            </h1>
            <p className="text-xl md:text-3xl text-white/50 max-w-4xl mx-auto mb-20 font-light leading-relaxed">
              Experience the meticulous 72-hour fermentation that defines our signature croissants. 
              Merging traditional craftsmanship with the pulse of the city.
            </p>
            <div className="flex flex-col sm:flex-row gap-12 justify-center items-center">
              <PremiumButton onClick={() => onNavigate('menu')}>Discover the Menu <ArrowRight size={20} /></PremiumButton>
              <button 
                onClick={() => onNavigate('story')}
                className="text-[12px] uppercase tracking-[0.6em] font-bold text-[#FAF9F6] hover:text-[#C5A059] transition-all py-8 group flex items-center gap-6"
              >
                The Bakerman Story <div className="w-16 h-[1px] bg-white/20 group-hover:w-28 group-hover:bg-[#C5A059] transition-all duration-700" />
              </button>
            </div>
          </motion.div>
        </div>

        <motion.div 
          animate={{ y: [0, 20, 0], opacity: [0.4, 1, 0.4] }} 
          transition={{ duration: 4, repeat: Infinity, ease: "easeInOut" }}
          className="absolute bottom-16 left-1/2 -translate-x-1/2 z-[3] flex flex-col items-center gap-10 text-[#C5A059]"
        >
          <div className="w-[1px] h-32 bg-gradient-to-b from-[#C5A059] to-transparent" />
          <span className="text-[11px] uppercase tracking-[1em] font-bold">Explore</span>
        </motion.div>
      </section>

      {/* The 72-Hour Philosophy Section (Scroll Driven) */}
      <section className="py-72 px-8 bg-[#FAF9F6] relative overflow-hidden">
        <div className="max-w-[1700px] mx-auto grid lg:grid-cols-12 gap-40 items-center">
          <div className="lg:col-span-5 relative">
            <motion.div 
              initial="hidden" whileInView="visible" viewport={{ once: true }}
              variants={VARIANTS.reveal}
              className="absolute inset-0 bg-[#C5A059] z-10 origin-left"
            />
            <div className="relative overflow-hidden aspect-[3/4] shadow-[100px_100px_200px_rgba(0,0,0,0.1)]">
              <img 
                src="https://images.unsplash.com/photo-1544333303-5775ad11977a?q=80&w=1500&auto=format&fit=crop" 
                className="w-full h-full object-cover grayscale brightness-90 hover:grayscale-0 transition-all duration-[2.5s] scale-[1.05] hover:scale-100" 
                alt="Bread Crafting" 
              />
            </div>
            <div className="absolute -bottom-24 -right-24 w-96 h-96 bg-[#121212] p-24 flex flex-col justify-center shadow-3xl z-20">
              <h4 className="text-[#C5A059] font-serif text-8xl mb-6 italic leading-none">72h</h4>
              <p className="text-white/40 text-[11px] uppercase tracking-[0.5em] font-bold leading-loose">
                Patience is the only shortcut to true flakiness.
              </p>
            </div>
          </div>
          
          <div className="lg:col-span-7 lg:pl-32">
            <SectionHeading title="Time is our Core." subtitle="The Philosophy" align="left" />
            <div className="space-y-16">
              <p className="text-4xl font-serif leading-tight text-[#121212]/80 italic">
                "We don't mix ingredients. We nurture a living organism until it reaches the peak of aromatic excellence."
              </p>
              <p className="text-2xl text-[#121212]/40 leading-relaxed font-light max-w-2xl">
                Every Bakerman creation begins its journey 72 hours before it reaches the oven. 
                Our Master Bakers treat every dough as a living masterpiece, utilizing high-fat French AOP butter for elite lamination.
              </p>
              
              <div className="grid md:grid-cols-2 gap-24 pt-16">
                {[
                  { icon: <ChefHat size={44} />, title: "Master Artisan", text: "Guided by global heritage, every loaf is hand-cut and stone-baked daily." },
                  { icon: <Sparkles size={44} />, title: "French AOP Dairy", text: "Exclusively sourced butter from Normandy for that distinct nutty aroma." }
                ].map((item, i) => (
                  <motion.div key={i} className="space-y-8 group" variants={VARIANTS.fadeInUp} initial="hidden" whileInView="visible" custom={i}>
                    <div className="w-24 h-24 bg-[#C5A059]/10 flex items-center justify-center text-[#C5A059] rounded-full group-hover:bg-[#C5A059] group-hover:text-white transition-all duration-700 shadow-sm">
                      {item.icon}
                    </div>
                    <h4 className="text-3xl font-serif">{item.title}</h4>
                    <p className="text-lg text-black/30 leading-relaxed font-light">{item.text}</p>
                  </motion.div>
                ))}
              </div>
              
              <div className="pt-20">
                <PremiumButton variant="outline" onClick={() => onNavigate('story')}>Learn Our Story</PremiumButton>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Panoramic Signature Preview (Horizontal Scroll Simulator) */}
      <section className="py-72 bg-[#121212] overflow-hidden">
        <SectionHeading title="The Artisanal Signature." subtitle="Signature Preview" light />
        
        <div className="flex gap-20 px-8 py-20 overflow-x-auto custom-scrollbar no-scrollbar-container">
           {BAKERMAN_DB.menu.signature_pastries.slice(0, 6).map((item, idx) => (
             <motion.div 
               key={item.id}
               initial={{ opacity: 0, x: 100 }}
               whileInView={{ opacity: 1, x: 0 }}
               transition={{ duration: 1, delay: idx * 0.1 }}
               viewport={{ once: true }}
               className="min-w-[450px] group relative"
             >
                <div className="aspect-[4/5] overflow-hidden bg-[#1c1c1c]">
                   <img src={item.img} className="w-full h-full object-cover grayscale opacity-60 group-hover:grayscale-0 group-hover:opacity-100 transition-all duration-1000" alt={item.name} />
                   <div className="absolute inset-0 bg-gradient-to-t from-[#121212] via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-all duration-700" />
                   <div className="absolute bottom-10 left-10 p-6 opacity-0 group-hover:opacity-100 translate-y-10 group-hover:translate-y-0 transition-all duration-700">
                      <span className="text-[#C5A059] uppercase text-[10px] tracking-widest font-bold block mb-4">Signature Item</span>
                      <h4 className="text-4xl font-serif text-[#FAF9F6]">{item.name}</h4>
                   </div>
                </div>
             </motion.div>
           ))}
        </div>
        
        <div className="mt-24 text-center">
           <PremiumButton variant="glass" onClick={() => onNavigate('menu')}>View Full Menu Experience</PremiumButton>
        </div>
      </section>
    </div>
  );
};

const MenuView = () => {
  const [activeTab, setActiveTab] = useState('signature_pastries');
  const [selectedItem, setSelectedItem] = useState(null);

  const categories = [
    { id: 'signature_pastries', label: 'Artisan Pastries', icon: <Croissant size={20} /> },
    { id: 'all_day_dining', label: 'All-Day Dining', icon: <Utensils size={20} /> },
    { id: 'beverages', label: 'Coffee & Brews', icon: <CoffeeIcon size={20} /> }
  ];

  return (
    <section className="pt-64 pb-72 px-12 bg-[#121212] min-h-screen relative overflow-hidden">
      {/* Immersive Decor */}
      <div className="absolute top-0 right-0 w-[1200px] h-[1200px] bg-[#C5A059] opacity-[0.03] rounded-full blur-[250px] -translate-y-1/2 translate-x-1/2 pointer-events-none" />

      <div className="max-w-[2000px] mx-auto relative z-10">
        <SectionHeading title="The Digital Collection." subtitle="The Menu" light={true} />
        
        {/* Luxury Tab Selection System */}
        <div className="flex flex-wrap justify-center gap-10 md:gap-24 mb-48">
          {categories.map(cat => (
            <button 
              key={cat.id}
              onClick={() => setActiveTab(cat.id)}
              className={`flex items-center gap-6 px-16 py-8 text-[11px] uppercase tracking-[0.7em] font-bold border rounded-full transition-all duration-[0.8s] ${
                activeTab === cat.id ? 'bg-[#C5A059] border-[#C5A059] text-white shadow-[0_25px_60px_rgba(197,160,89,0.4)] scale-105' : 'bg-transparent border-white/10 text-white/30 hover:border-white/30'
              }`}
            >
              {cat.icon}
              {cat.label}
            </button>
          ))}
        </div>

        <motion.div 
          layout
          key={activeTab}
          initial="hidden" animate="visible"
          className="grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-20"
        >
          <AnimatePresence mode="popLayout">
            {BAKERMAN_DB.menu[activeTab].map((item, idx) => (
              <motion.div 
                layout
                key={item.id}
                custom={idx}
                variants={VARIANTS.fadeInUp}
                onClick={() => setSelectedItem(item)}
                className="group relative bg-[#1c1c1c] border border-white/5 overflow-hidden flex flex-col h-full hover:border-[#C5A059]/40 transition-all duration-1000 shadow-[0_50px_100px_rgba(0,0,0,0.5)] cursor-pointer"
              >
                <div className="relative aspect-[3/4] overflow-hidden bg-[#121212]">
                  <motion.img 
                    whileHover={{ scale: 1.15 }}
                    transition={{ duration: 2 }}
                    src={item.img} 
                    className="w-full h-full object-cover grayscale group-hover:grayscale-0 opacity-80 group-hover:opacity-100 transition-all duration-1000" 
                    alt={item.name} 
                    onError={(e) => { e.target.src = `https://placehold.co/800x1200/121212/C5A059?text=${item.name}`; }}
                  />
                  {item.tags.length > 0 && (
                    <div className="absolute top-10 left-10 flex flex-col gap-4">
                      {item.tags.map(t => (
                        <span key={t} className="bg-[#C5A059] text-white px-8 py-3 text-[10px] font-bold tracking-[0.5em] uppercase shadow-2xl w-fit">
                          {t}
                        </span>
                      ))}
                    </div>
                  )}
                  <div className="absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity duration-700 flex flex-col items-center justify-center p-14 text-center">
                    <p className="text-white text-lg font-light leading-relaxed mb-12 italic">"{item.desc}"</p>
                    <PremiumButton variant="glass" className="scale-90 group-hover:scale-100 shadow-2xl">View Nutrients</PremiumButton>
                  </div>
                </div>
                
                <div className="p-16 flex-grow flex flex-col">
                  <div className="flex justify-between items-start mb-12">
                    <h3 className="text-4xl font-serif text-[#FAF9F6] group-hover:text-[#C5A059] transition-colors duration-700 tracking-tight leading-tight">{item.name}</h3>
                    <span className="text-2xl font-serif text-[#C5A059] ml-10">{item.price}</span>
                  </div>
                  <div className="mt-auto pt-14 border-t border-white/5 flex justify-between items-center">
                    <div className="flex items-center gap-6 text-white/20">
                      <Zap size={20} className="text-[#C5A059]" />
                      <span className="text-[13px] uppercase tracking-[0.3em] font-bold">{item.calories}</span>
                    </div>
                    <button className="text-[#C5A059] hover:translate-x-8 transition-transform duration-700 flex items-center gap-6 group">
                      <span className="text-[11px] uppercase tracking-[0.4em] font-bold group-hover:text-white transition-colors">Selection</span>
                      <ArrowRight size={32} />
                    </button>
                  </div>
                </div>
              </motion.div>
            ))}
          </AnimatePresence>
        </motion.div>

        {/* Nutritional Modal (Interactive Fitur Baru) */}
        <AnimatePresence>
          {selectedItem && (
            <motion.div 
              initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}
              className="fixed inset-0 z-[10000] bg-[#121212]/95 backdrop-blur-xl flex items-center justify-center p-8 overflow-y-auto"
              onClick={() => setSelectedItem(null)}
            >
               <motion.div 
                 initial={{ scale: 0.9, y: 50 }} animate={{ scale: 1, y: 0 }} exit={{ scale: 0.9, y: 50 }}
                 className="bg-[#1c1c1c] max-w-5xl w-full border border-white/10 p-16 md:p-24 grid md:grid-cols-2 gap-20 relative"
                 onClick={e => e.stopPropagation()}
               >
                  <button className="absolute top-10 right-10 text-white/40 hover:text-white" onClick={() => setSelectedItem(null)}><X size={40} /></button>
                  <div className="aspect-[4/5] bg-black overflow-hidden">
                     <img src={selectedItem.img} className="w-full h-full object-cover grayscale" alt={selectedItem.name} />
                  </div>
                  <div className="flex flex-col justify-center">
                     <span className="text-[#C5A059] uppercase tracking-[0.5em] text-xs font-bold mb-6 block">Nutritional Intelligence</span>
                     <h3 className="text-7xl font-serif text-white mb-8 tracking-tighter leading-none">{selectedItem.name}</h3>
                     <p className="text-white/40 text-2xl font-light italic mb-12 leading-relaxed">"{selectedItem.desc}"</p>
                     
                     {selectedItem.nutrition && (
                        <div className="grid grid-cols-3 gap-8 mb-16 py-12 border-y border-white/5">
                           <div className="text-center">
                              <p className="text-[#C5A059] font-serif text-4xl mb-2">{selectedItem.nutrition.carbs}</p>
                              <p className="text-white/20 text-[10px] uppercase tracking-widest">Carbohydrates</p>
                           </div>
                           <div className="text-center">
                              <p className="text-[#C5A059] font-serif text-4xl mb-2">{selectedItem.nutrition.fat}</p>
                              <p className="text-white/20 text-[10px] uppercase tracking-widest">Fats</p>
                           </div>
                           <div className="text-center">
                              <p className="text-[#C5A059] font-serif text-4xl mb-2">{selectedItem.nutrition.protein}</p>
                              <p className="text-white/20 text-[10px] uppercase tracking-widest">Proteins</p>
                           </div>
                        </div>
                     )}
                     
                     <div className="flex gap-4 mb-16">
                        {selectedItem.allergens?.map(a => (
                          <span key={a} className="px-5 py-2 bg-white/5 text-white/30 text-[9px] uppercase tracking-widest border border-white/5">Contains: {a}</span>
                        ))}
                     </div>
                     <PremiumButton variant="gold" className="w-full">Order Now - {selectedItem.price}</PremiumButton>
                  </div>
               </motion.div>
            </motion.div>
          )}
        </AnimatePresence>

        {/* Catering Masterpiece Footer Section */}
        <div className="mt-80 text-center bg-white/[0.02] p-24 md:p-56 rounded-sm border border-white/5 relative overflow-hidden">
          <div className="absolute top-0 left-0 w-full h-[2px] bg-gradient-to-r from-transparent via-[#C5A059] to-transparent" />
          <SectionHeading title="Institutional Catering." subtitle="Bespoke Events" light />
          <p className="text-white/30 text-4xl font-serif mb-32 max-w-5xl mx-auto italic leading-relaxed">
            "Elevate your celebrations with our artisanal gift sets. We believe that true luxury lies in the details—meticulously tailored for corporate distinction and private joy."
          </p>
          <div className="flex flex-wrap justify-center gap-16">
            <PremiumButton variant="outline">Request Experience Catalog</PremiumButton>
            <PremiumButton variant="gold">Inquire via Concierge</PremiumButton>
          </div>
        </div>
      </div>
    </section>
  );
};

const LocationsView = () => {
  const [sel, setSel] = useState(BAKERMAN_DB.stores[0]);
  const [reg, setReg] = useState('All');

  const filtered = useMemo(() => reg === 'All' ? BAKERMAN_DB.stores : BAKERMAN_DB.stores.filter(s => s.region === reg), [reg]);

  return (
    <section className="pt-64 pb-72 px-12 bg-[#FAF9F6] min-h-screen relative">
      <div className="max-w-[2100px] mx-auto">
        <SectionHeading title="Urban Sanctuaries." subtitle="Our Locations" />

        <div className="flex justify-center flex-wrap gap-10 mb-40">
          {['All', 'Jakarta Selatan', 'Jakarta Pusat', 'Jakarta Utara'].map(r => (
            <button 
              key={r}
              onClick={() => setReg(r)}
              className={`px-16 py-5 rounded-full text-[12px] uppercase tracking-widest font-bold border transition-all duration-[0.8s] ${
                reg === r ? 'bg-[#121212] text-white border-[#121212] shadow-3xl scale-110' : 'bg-transparent text-[#121212]/30 border-black/5 hover:border-[#C5A059]'
              }`}
            >
              {r}
            </button>
          ))}
        </div>

        <div className="grid lg:grid-cols-12 gap-24 h-[1000px]">
          {/* Detailed Branch Navigation List */}
          <div className="lg:col-span-4 overflow-y-auto pr-10 space-y-10 custom-scrollbar">
            {filtered.map(s => (
              <motion.div 
                key={s.id}
                layout
                onClick={() => setSel(s)}
                className={`p-20 border transition-all duration-[1s] cursor-pointer group relative overflow-hidden ${
                  sel.id === s.id ? 'bg-[#121212] border-[#121212] shadow-3xl scale-[1.05]' : 'bg-white border-black/5 hover:border-[#C5A059]'
                }`}
              >
                {sel.id === s.id && <motion.div layoutId="selLine" className="absolute left-0 top-0 bottom-0 w-5 bg-[#C5A059] z-10" />}
                <div className="flex justify-between items-start mb-16">
                  <MapPin className={`${sel.id === s.id ? 'text-[#C5A059]' : 'text-black/10'} group-hover:text-[#C5A059] transition-colors`} size={52} />
                  <div className="flex gap-6">
                    {s.tags.slice(0, 1).map(t => (
                      <span key={t} className="text-[11px] uppercase tracking-widest px-6 py-2.5 bg-[#C5A059]/10 text-[#C5A059] font-bold">{t}</span>
                    ))}
                  </div>
                </div>
                <h3 className={`text-5xl font-serif mb-10 transition-colors ${sel.id === s.id ? 'text-[#FAF9F6]' : 'text-[#121212]'}`}>
                  {s.name}
                </h3>
                <p className={`text-xl mb-16 font-light leading-relaxed transition-colors ${sel.id === s.id ? 'text-[#FAF9F6]/40' : 'text-black/40'}`}>
                  {s.address}
                </p>
                <div className={`flex items-center gap-10 text-[12px] font-bold tracking-[0.5em] uppercase transition-all ${sel.id === s.id ? 'text-[#C5A059]' : 'text-[#121212]/20'}`}>
                  Store Experience <ArrowRight size={28} className="group-hover:translate-x-12 transition-transform duration-[0.8s]" />
                </div>
              </motion.div>
            ))}
          </div>

          {/* Immersive Detail & Map Experience */}
          <div className="lg:col-span-8 bg-white border border-black/5 overflow-hidden flex flex-col shadow-3xl relative">
            <AnimatePresence mode="wait">
              <motion.div 
                key={sel.id}
                initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}
                transition={{ duration: 1 }}
                className="flex-grow relative bg-[#f1f1f1]"
              >
                <iframe 
                  src={sel.map}
                  className="absolute inset-0 w-full h-full border-0 grayscale invert-[0.05] contrast-[1.2] opacity-80"
                  allowFullScreen="" 
                  loading="lazy" 
                  title={sel.name}
                />
                <div className="absolute inset-0 pointer-events-none shadow-[inset_0_0_300px_rgba(0,0,0,0.15)]" />
              </motion.div>
            </AnimatePresence>
            
            <div className="p-24 md:p-32 bg-[#121212] text-[#FAF9F6] grid md:grid-cols-2 gap-24 relative border-t border-white/5">
              <div className="space-y-20">
                <h4 className="text-[#C5A059] uppercase tracking-[0.8em] text-[14px] font-bold">Store Intelligence</h4>
                <div className="grid gap-20">
                  <div className="flex items-center gap-12 group">
                    <div className="p-8 bg-white/5 rounded-full text-[#C5A059] group-hover:bg-[#C5A059] group-hover:text-white transition-all duration-700">
                      <Clock size={44} />
                    </div>
                    <div>
                      <p className="text-[13px] uppercase tracking-[0.3em] text-white/20 mb-4 font-bold">Service Window</p>
                      <p className="text-4xl font-serif italic tracking-tight">{sel.hours}</p>
                    </div>
                  </div>
                  <div className="flex items-center gap-12 group">
                    <div className="p-8 bg-white/5 rounded-full text-[#C5A059] group-hover:bg-[#C5A059] group-hover:text-white transition-all duration-700">
                      <Phone size={44} />
                    </div>
                    <div>
                      <p className="text-[13px] uppercase tracking-[0.3em] text-white/20 mb-4 font-bold">Concierge Line</p>
                      <p className="text-4xl font-serif italic tracking-tight">{sel.phone}</p>
                    </div>
                  </div>
                </div>
              </div>
              
              <div className="flex flex-col justify-between">
                <div>
                  <h4 className="text-[#C5A059] uppercase tracking-[0.8em] text-[14px] font-bold mb-16">Atmosphere & Mood</h4>
                  <div className="flex flex-wrap gap-6 mb-24">
                    {sel.tags.map(t => (
                      <span key={t} className="px-10 py-5 border border-white/10 text-white/30 text-[13px] uppercase tracking-widest font-bold hover:border-[#C5A059] hover:text-[#C5A059] transition-all cursor-default">{t}</span>
                    ))}
                  </div>
                </div>
                <div className="grid grid-cols-2 gap-10">
                  <PremiumButton variant="gold" className="w-full">Get Directions</PremiumButton>
                  <PremiumButton variant="outline" className="w-full">Open in Maps</PremiumButton>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  );
};

// --- CORE APP ARCHITECTURE ---

export default function App() {
  const [page, setPage] = useState('home');
  const [isScrolled, setIsScrolled] = useState(false);
  const [navOpen, setNavOpen] = useState(false);
  const [isLoading, setIsLoading] = useState(true);

  // Advanced Preload Sequence for Luxury Feel
  useEffect(() => {
    const handleScroll = () => setIsScrolled(window.scrollY > 120);
    window.addEventListener('scroll', handleScroll);
    const timer = setTimeout(() => setIsLoading(false), 4000); // Extended loading for drama
    return () => {
      window.removeEventListener('scroll', handleScroll);
      clearTimeout(timer);
    };
  }, []);

  // Adaptive Smooth Scroll Control
  useEffect(() => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }, [page]);

  const navItems = [
    { id: 'home', label: 'The Experience' },
    { id: 'story', label: 'The Craft' },
    { id: 'menu', label: 'Digital Menu' },
    { id: 'locations', label: 'Store Locator' }
  ];

  if (isLoading) {
    return (
      <div className="fixed inset-0 z-[10000] bg-[#121212] flex flex-col items-center justify-center">
        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className="text-center">
          <div className="text-[140px] font-serif text-[#FAF9F6] mb-24 flex items-center justify-center gap-10 select-none">
            B<motion.span animate={{ opacity: [0, 1, 0] }} transition={{ duration: 2, repeat: Infinity }} className="text-[#C5A059]">.</motion.span>
          </div>
          <div className="w-[600px] h-[1px] bg-white/5 relative overflow-hidden mx-auto shadow-2xl">
            <motion.div initial={{ x: "-100%" }} animate={{ x: "100%" }} transition={{ duration: 4, repeat: Infinity, ease: "linear" }} className="absolute inset-0 bg-[#C5A059] w-3/4" />
          </div>
          <p className="mt-24 text-[14px] uppercase tracking-[2em] text-white/20 font-bold">Artisanal Patience Jakarta</p>
        </motion.div>
      </div>
    );
  }

  return (
    <div className="relative selection:bg-[#C5A059] selection:text-white bg-[#FAF9F6]">
      <GrainyTexture />
      <CustomCursor />

      {/* DYNAMIC MASTER NAVIGATION HEADER */}
      <header 
        className={`fixed top-0 left-0 w-full z-50 transition-all duration-[1.5s] px-16 md:px-40 ${
          isScrolled || navOpen ? 'py-10 bg-[#121212]/95 backdrop-blur-[40px] shadow-[0_60px_120px_rgba(0,0,0,0.6)] border-b border-white/5' : 'py-24 bg-transparent'
        }`}
      >
        <div className="max-w-[2400px] mx-auto flex justify-between items-center">
          {/* Institutional Brand Identity */}
          <motion.div 
            onClick={() => setPage('home')}
            className="flex items-center gap-12 cursor-pointer group"
          >
            <div className="w-24 h-24 bg-[#C5A059] flex items-center justify-center text-white font-serif text-7xl group-hover:scale-110 transition-all duration-[1s] shadow-3xl">B</div>
            <span className="text-5xl font-serif tracking-tighter text-[#FAF9F6] uppercase hidden xl:block tracking-widest leading-none select-none">BAKERMAN</span>
          </motion.div>

          {/* Luxury Desktop Navigation Orchestration */}
          <nav className="hidden xl:flex items-center gap-32">
            {navItems.map(item => (
              <button 
                key={item.id}
                onClick={() => setPage(item.id)}
                className={`text-[14px] uppercase tracking-[0.8em] font-bold transition-all duration-700 relative group py-8 ${
                  page === item.id ? 'text-[#C5A059]' : 'text-white/40 hover:text-white'
                }`}
              >
                {item.label}
                <motion.span className={`absolute -bottom-1 left-0 h-[2px] bg-[#C5A059] transition-all duration-700 ${page === item.id ? 'w-full' : 'w-0 group-hover:w-full'}`} />
              </button>
            ))}
            <PremiumButton 
              className="px-20 py-8 bg-[#FAF9F6] text-[#121212] border-none text-[12px] hover:bg-[#C5A059] hover:text-white shadow-[0_30px_60px_rgba(0,0,0,0.4)]"
              onClick={() => setPage('menu')}
            >
              Order Concierge
            </PremiumButton>
          </nav>

          {/* Cinematic Mobile Navigation Portal */}
          <button className="xl:hidden p-8 text-[#FAF9F6] hover:text-[#C5A059] transition-colors" onClick={() => setNavOpen(!navOpen)}>
            {navOpen ? <X size={64} /> : <MenuIcon size={64} />}
          </button>
        </div>

        {/* Immersive Mobile Navigation Overlay */}
        <AnimatePresence>
          {navOpen && (
            <motion.div 
              initial={{ opacity: 0, x: "100%" }} animate={{ opacity: 1, x: 0 }} exit={{ opacity: 0, x: "100%" }}
              transition={{ type: 'spring', damping: 45, stiffness: 200 }}
              className="fixed inset-0 top-[144px] bg-[#121212] z-[40] xl:hidden flex flex-col p-32 gap-24 overflow-y-auto"
            >
              {navItems.map((item, i) => (
                <motion.button 
                  key={item.id}
                  initial={{ opacity: 0, x: 100 }} animate={{ opacity: 1, x: 0 }}
                  transition={{ delay: i * 0.2 }}
                  onClick={() => { setPage(item.id); setNavOpen(false); }}
                  className={`text-[15vw] font-serif text-left tracking-tighter leading-none italic ${page === item.id ? 'text-[#C5A059]' : 'text-white/20'}`}
                >
                  {item.label}
                </motion.button>
              ))}
              <div className="mt-auto pt-40 border-t border-white/5 flex flex-col gap-24">
                 <div className="grid md:grid-cols-2 gap-32">
                    <div className="space-y-12">
                       <p className="text-[#C5A059] text-[14px] uppercase tracking-[0.7em] font-bold underline underline-offset-[15px] decoration-white/10 mb-10">Institutional Inquiries</p>
                       <p className="text-white/40 text-4xl font-light italic">press@bakerman.co.id</p>
                    </div>
                    <div className="space-y-12">
                       <p className="text-[#C5A059] text-[14px] uppercase tracking-[0.7em] font-bold underline underline-offset-[15px] decoration-white/10 mb-10">Catering Direct Line</p>
                       <p className="text-white/40 text-4xl font-light italic">+62 21 5011 1234</p>
                    </div>
                 </div>
                 <PremiumButton className="w-full">Initiate Concierge Order</PremiumButton>
              </div>
            </motion.div>
          )}
        </AnimatePresence>
      </header>

      {/* --- CULINARY ENGINE CORE (SPA RENDERER) --- */}
      <main>
        <AnimatePresence mode="wait">
          <motion.div key={page} {...VARIANTS.pageTransition}>
            {page === 'home' && <HomeView onNavigate={setPage} />}
            {page === 'menu' && <MenuView />}
            {page === 'locations' && <LocationsView />}
            {page === 'story' && (
              <div className="pt-80 pb-80 px-16 bg-[#121212] min-h-screen">
                <div className="max-w-[1500px] mx-auto">
                   <SectionHeading title="The Legacy of Time." subtitle="The Story" light />
                   
                   <div className="grid md:grid-cols-2 gap-64 items-center mb-80">
                      <div className="space-y-24">
                        <span className="text-[250px] font-serif text-[#C5A059] block italic opacity-20 leading-none select-none tracking-tighter">01</span>
                        <h3 className="text-8xl font-serif text-[#FAF9F6] tracking-tighter leading-none">Jakarta Urban Roots.</h3>
                        <p className="text-white/40 text-4xl font-light leading-relaxed italic">
                          Bakerman was established in 2020 with a single institutional vision: to redefine the morning ritual. We merge the soulful artisanal heritage of America with Jakarta's bold urban spirit.
                        </p>
                        <div className="w-80 h-[2px] bg-[#C5A059] shadow-2xl" />
                      </div>
                      <div className="aspect-square bg-white/5 relative group overflow-hidden shadow-[100px_100px_200px_rgba(0,0,0,0.4)]">
                        <img src="https://images.unsplash.com/photo-1555507036-ab1f4038808a?q=80&w=2000&auto=format&fit=crop" className="w-full h-full object-cover grayscale opacity-50 group-hover:opacity-100 group-hover:scale-110 transition-all duration-[5s]" alt="Bakery Roots" />
                        <div className="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-1500" />
                      </div>
                   </div>

                   <div className="grid md:grid-cols-2 gap-64 items-center">
                      <div className="order-2 md:order-1 aspect-square bg-white/5 relative group overflow-hidden shadow-[100px_100px_200px_rgba(0,0,0,0.4)]">
                        <img src="https://images.unsplash.com/photo-1509440159596-0249088772ff?q=80&w=2000&auto=format&fit=crop" className="w-full h-full object-cover grayscale opacity-50 group-hover:opacity-100 group-hover:scale-110 transition-all duration-[5s]" alt="Dough Alchemy" />
                        <div className="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-1500" />
                      </div>
                      <div className="order-1 md:order-2 space-y-24">
                        <span className="text-[250px] font-serif text-[#C5A059] block italic opacity-20 leading-none select-none tracking-tighter">02</span>
                        <h3 className="text-8xl font-serif text-[#FAF9F6] tracking-tighter leading-none">The Science of Soul.</h3>
                        <p className="text-white/40 text-4xl font-light leading-relaxed italic">
                          Our cold-fermentation is a strictly timed 72-hour ritual. This duration is mandatory for enzymatic action to unlock the complex aromatic profiles that define a true sourdough and lamination.
                        </p>
                        <div className="flex gap-40">
                           <div className="space-y-8">
                              <p className="text-8xl text-[#C5A059] font-serif italic tracking-tighter">81</p>
                              <p className="text-[14px] uppercase tracking-[0.6em] text-white/20 font-bold">Flaky Layers</p>
                           </div>
                           <div className="space-y-8">
                              <p className="text-8xl text-[#C5A059] font-serif italic tracking-tighter">100%</p>
                              <p className="text-[14px] uppercase tracking-[0.6em] text-white/20 font-bold">French AOP Dairy</p>
                           </div>
                        </div>
                      </div>
                   </div>
                </div>
              </div>
            )}
          </motion.div>
        </AnimatePresence>
      </main>

      {/* INSTITUTIONAL GLOBAL FOOTER MASTERPIECE */}
      <footer className="bg-[#121212] pt-80 pb-40 px-16 md:px-40 border-t border-white/5 relative overflow-hidden">
        {/* Dynamic Visual Watermark Layer */}
        <div className="absolute -bottom-20 -right-20 text-[32vw] font-serif text-white/[0.02] select-none pointer-events-none uppercase tracking-tighter leading-none italic select-none">Bakerman</div>

        <div className="max-w-[2600px] mx-auto relative z-10">
          <div className="grid lg:grid-cols-12 gap-48 mb-80">
            {/* Identity & Mission Pillar */}
            <div className="lg:col-span-5 space-y-32">
              <div className="flex items-center gap-16">
                <div className="w-32 h-32 bg-[#C5A059] flex items-center justify-center text-white font-serif text-8xl shadow-[0_40px_80px_rgba(0,0,0,0.6)]">B</div>
                <span className="text-8xl font-serif text-[#FAF9F6] tracking-tighter uppercase tracking-widest leading-none select-none">BAKERMAN</span>
              </div>
              <p className="text-5xl text-white/30 font-light leading-relaxed max-w-3xl italic">
                Artisanal American Bakery & Urban Cafe. Committed to the craft of long-fermentation and the bold soul of Jakarta since 2020.
              </p>
              <div className="flex gap-20">
                {[Instagram, FbIcon, Twitter, Mail].map((Icon, idx) => (
                  <a key={idx} href="#" className="w-24 h-24 border border-white/10 rounded-full flex items-center justify-center text-white/20 hover:text-[#C5A059] hover:border-[#C5A059] transition-all duration-[1s] transform hover:-translate-y-10 shadow-[0_40px_80px_rgba(0,0,0,0.4)]">
                    <Icon size={48} />
                  </a>
                ))}
              </div>
            </div>

            {/* Navigation Pillar A */}
            <div className="lg:col-span-2">
              <h5 className="text-[#C5A059] text-[14px] uppercase tracking-[1em] font-bold mb-24 underline underline-offset-[30px] decoration-white/10">The Brand</h5>
              <ul className="space-y-16">
                {['The Craft', 'The Collection', 'Store Locator', 'Career Hub', 'Sustainability'].map(i => (
                  <li key={i}>
                    <button onClick={() => setPage(i.toLowerCase().includes('craft') ? 'story' : i.toLowerCase().includes('collection') ? 'menu' : 'locations')} className="text-white/40 hover:text-[#FAF9F6] text-[16px] font-bold tracking-[0.5em] uppercase transition-all flex items-center gap-10 group">
                      <div className="w-8 h-[1px] bg-[#C5A059] scale-x-0 group-hover:scale-x-[3.5] transition-transform origin-left duration-[0.8s]" />
                      {i}
                    </button>
                  </li>
                ))}
              </ul>
            </div>

            {/* Navigation Pillar B */}
            <div className="lg:col-span-2">
              <h5 className="text-[#C5A059] text-[14px] uppercase tracking-[1em] font-bold mb-24 underline underline-offset-[30px] decoration-white/10">Concierge</h5>
              <ul className="space-y-16">
                {['Catering Inquiry', 'Bespoke Hampers', 'Corporate Gifting', 'Ordering FAQ', 'Contact Center'].map(i => (
                  <li key={i}>
                    <a href="#" className="text-white/40 hover:text-[#FAF9F6] text-[16px] font-bold tracking-[0.5em] uppercase transition-all flex items-center gap-6">{i}</a>
                  </li>
                ))}
              </ul>
            </div>

            {/* Newsletter Portal Pillar */}
            <div className="lg:col-span-3">
              <h5 className="text-[#C5A059] text-[14px] uppercase tracking-[1em] font-bold mb-24 underline underline-offset-[30px] decoration-white/10">Urban Circle</h5>
              <p className="text-white/30 text-2xl font-light mb-20 italic leading-relaxed">Join our inner circle for priority access to seasonal drops, artisanal tasting events, and urban stories.</p>
              <div className="relative">
                <input 
                  type="email" 
                  placeholder="Email Address" 
                  className="w-full bg-transparent border-b border-white/10 py-10 outline-none text-[#FAF9F6] focus:border-[#C5A059] transition-all text-3xl font-light placeholder:text-white/5"
                />
                <button className="absolute right-0 top-1/2 -translate-y-1/2 text-[#C5A059] hover:translate-x-12 transition-transform duration-[1s]">
                  <ArrowRight size={64} />
                </button>
              </div>
              <div className="mt-20 flex items-center gap-8 text-[13px] text-white/10 uppercase tracking-[0.6em] font-bold italic">
                <ShieldCheck size={28} />
                <span>Private & Encrypted Data Node</span>
              </div>
            </div>
          </div>

          {/* Legal Institutional Bottom Bar */}
          <div className="pt-40 border-t border-white/5 flex flex-col md:flex-row justify-between items-center gap-32 text-[14px] uppercase tracking-[0.8em] font-bold text-white/10">
            <div className="text-center md:text-left space-y-8">
               <p>© 2026 Bakerman Artisanal Bakery. A Division of Urban Lifestyle International Holdings.</p>
               <p>Handcrafted in Jakarta, Indonesia with Soul, Precision & Patience.</p>
            </div>
            <div className="flex flex-col md:flex-row gap-24 items-center">
              <div className="flex gap-20">
                <a href="#" className="hover:text-white transition-all underline decoration-white/5 underline-offset-[10px]">Privacy Policy</a>
                <a href="#" className="hover:text-white transition-all underline decoration-white/5 underline-offset-[10px]">Store Locator</a>
                <a href="#" className="hover:text-white transition-all underline decoration-white/5 underline-offset-[10px]">B2B Terms</a>
              </div>
              <div className="w-[1px] h-32 bg-white/5 hidden md:block" />
              <div className="text-center md:text-right space-y-4">
                <p>Digital Experience by <span className="text-[#C5A059]">Lavirix Creative Web</span></p>
                <div className="flex gap-8 items-center justify-center md:justify-end">
                   <div className="w-4 h-4 bg-green-500 rounded-full animate-pulse shadow-[0_0_30px_rgba(34,197,94,0.7)]" />
                   <span className="text-[11px] tracking-[0.4em]">Global Systems Operational</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </footer>
    </div>
  );
}

/**
 * GLOBAL LUXURY STYLES (Tailwind & CSS Injections)
 * ===============================================
 */
const GLOBAL_UX_STYLES = `
  @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;700&display=swap');
  
  body {
    background-color: #FAF9F6;
    font-family: 'Inter', sans-serif;
    overflow-x: hidden;
    color: #121212;
    -webkit-font-smoothing: antialiased;
    scroll-behavior: smooth;
  }

  .font-serif {
    font-family: 'Playfair Display', serif;
  }

  .ease-expo {
    transition-timing-function: cubic-bezier(0.16, 1, 0.3, 1);
  }

  /* Ultra-Thin Custom Scrollbar for Premium Feel */
  .custom-scrollbar::-webkit-scrollbar {
    width: 2px;
  }
  .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(0,0,0,0.01);
  }
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: #C5A059;
  }
  
  .no-scrollbar-container::-webkit-scrollbar {
    display: none;
  }

  /* Global Selection Design */
  ::selection {
    background-color: #C5A059;
    color: #FAF9F6;
  }

  /* Map Normalization & Cinematic Grayscale */
  iframe {
    filter: grayscale(1) invert(0.05) contrast(1.3) brightness(0.9);
    transition: all 1.2s ease;
  }
  
  /* High-Definition Rendering Fixes */
  img {
    image-rendering: -webkit-optimize-contrast;
  }
`;

// Inject global architectural styles
if (typeof document !== 'undefined') {
  const s = document.createElement("style");
  s.innerText = GLOBAL_UX_STYLES;
  document.head.appendChild(s);
}

    { id: 31, name: "Walnut Fig Loaf", price: "55k", desc: "Artisanal sourdough loaded with toasted walnuts and dried Turkish figs.", tags: ["Artisan"], calories: "260 kcal", img: "https://images.unsplash.com/photo-1549931319-a545dcf3bc73?auto=format&fit=crop&q=80&w=800" }
  ],
  dining: [
    { id: 9, name: "Wagyu Urban Burger", price: "155k", desc: "MS7+ Wagyu beef, house-made charcoal brioche, caramelized onions, truffle aioli.", tags: ["Signature", "Heavy"], calories: "820 kcal", img: "https://images.unsplash.com/photo-1568901346375-23c9450c58cd?auto=format&fit=crop&q=80&w=800" },
    { id: 10, name: "Lobster Sourdough Roll", price: "185k", desc: "Fresh Atlantic lobster chunks with herb butter served on our toasted buttery sourdough.", tags: ["Premium"], calories: "650 kcal", img: "https://images.unsplash.com/photo-1608039829572-78524f79c4c7?auto=format&fit=crop&q=80&w=800" },
    { id: 11, name: "Truffle Mac & 5 Cheese", price: "115k", desc: "Decadent blend of five imported cheeses with wild mushrooms and shaved truffles.", tags: ["Comfort"], calories: "740 kcal", img: "https://images.unsplash.com/photo-1543339308-43e59d6b73a6?auto=format&fit=crop&q=80&w=800" },
    { id: 12, name: "Duck Confit Benedict", price: "135k", desc: "Poached organic eggs, slow-cooked duck leg, and yuzu hollandaise on toasted brioche.", tags: ["Brunch"], calories: "610 kcal", img: "https://images.unsplash.com/photo-1519708227418-c8fd9a32b7a2?auto=format&fit=crop&q=80&w=800" },
    { id: 13, name: "Smoked Salmon Avocado Toast", price: "98k", desc: "Norwegian smoked salmon, smashed avocado, and radishes on artisanal multigrain.", tags: ["Healthy"], calories: "420 kcal", img: "https://images.unsplash.com/photo-1525351484163-7529414344d8?auto=format&fit=crop&q=80&w=800" },
    { id: 32, name: "Mushroom Risotto", price: "125k", desc: "Arborio rice cooked in porcini broth with seasonal wild mushrooms.", tags: ["Vegetarian"], calories: "520 kcal", img: "https://images.unsplash.com/photo-1476124369491-e7addf5db371?auto=format&fit=crop&q=80&w=800" },
    { id: 33, name: "Pan-Seared Salmon", price: "165k", desc: "Atlantic salmon with lemon caper sauce and roasted root vegetables.", tags: ["Low Carb"], calories: "480 kcal", img: "https://images.unsplash.com/photo-1467003909585-2f8a72700288?auto=format&fit=crop&q=80&w=800" }
  ],
  beverages: [
    { id: 14, name: "Dirty Matcha Latte", price: "55k", desc: "Ceremonial Uji Matcha with a double shot of our urban espresso blend.", tags: ["Best Seller"], calories: "180 kcal", img: "https://images.unsplash.com/photo-1515823662273-0b7880588ef6?auto=format&fit=crop&q=80&w=800" },
    { id: 15, name: "Sea Salt Cold Brew", price: "48k", desc: "24-hour steep coffee topped with our signature creamy sea salt foam.", tags: ["Refreshing"], calories: "120 kcal", img: "https://images.unsplash.com/photo-1485808191679-5f86510681a2?auto=format&fit=crop&q=80&w=800" },
    { id: 16, name: "Black Charcoal Latte", price: "48k", desc: "Activated charcoal with spiced vanilla and velvety micro-foam.", tags: ["Unique"], calories: "150 kcal", img: "https://images.unsplash.com/photo-1497633762265-9d179a990aa6?auto=format&fit=crop&q=80&w=800" },
    { id: 17, name: "Lychee Rose Tea", price: "42k", desc: "Cold brew premium black tea with fresh lychee and organic rose petals.", tags: [], calories: "80 kcal", img: "https://images.unsplash.com/photo-1556679343-c7306c1976bc?auto=format&fit=crop&q=80&w=800" },
    { id: 34, name: "Iced Spanish Latte", price: "52k", desc: "Double shot espresso with condensed milk and silky textured milk.", tags: ["Sweet"], calories: "240 kcal", img: "https://images.unsplash.com/photo-1559496417-e7f25cb247f3?auto=format&fit=crop&q=80&w=800" },
    { id: 35, name: "Orange Espresso Tonic", price: "55k", desc: "Fresh orange juice, tonic water, and espresso over crystal ice.", tags: ["Zesty"], calories: "90 kcal", img: "https://images.unsplash.com/photo-1517701550927-30cf4ba1dba5?auto=format&fit=crop&q=80&w=800" }
  ]
};

// --- DATASET MASIF: CABANG (12+ LOCATIONS) ---

const BRANCH_LOCATIONS = [
  { 
    id: 1, 
    name: "Ashta District 8", 
    region: "Jakarta Selatan", 
    address: "District 8, SCBD Lot 28, Ground Floor, Jakarta Selatan 12190", 
    phone: "+62 21 5011 1234", 
    hours: "08:00 AM - 10:00 PM",
    mapIframe: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3966.2625375545224!2d106.80554157588722!3d-6.229074061002364!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e69f15779010001%3A0x6a0f4a86b510c8f5!2sAshta%20District%208!5e0!3m2!1sen!2sid!4v1700000000000!5m2!1sen!2sid",
    tags: ["Flagship", "Pet Friendly", "Live Baking"],
    capacity: "85 Seating",
    vibe: "Urban Industrial"
  },
  { 
    id: 2, 
    name: "Pondok Indah Mall 3", 
    region: "Jakarta Selatan", 
    address: "Level 2, Pondok Indah Mall 3, Jakarta Selatan 12310", 
    phone: "+62 21 7592 1234", 
    hours: "10:00 AM - 10:00 PM",
    mapIframe: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3965.987764516335!2d106.7818!3d-6.2653!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e69f1a05187e59b%3A0x8898992e3a6c988c!2sPondok%20Indah%20Mall%203!5e0!3m2!1sen!2sid!4v1700000000001!5m2!1sen!2sid",
    tags: ["Family Friendly", "Exclusive Lounge"],
    capacity: "120 Seating",
    vibe: "Sophisticated Luxe"
  },
  { 
    id: 3, 
    name: "One Satrio", 
    region: "Jakarta Selatan", 
    address: "CBD Kuningan, Jl. Mega Kuningan Barat, Jakarta Selatan 12950", 
    phone: "+62 21 2988 1234", 
    hours: "07:00 AM - 11:00 PM",
    mapIframe: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3966.3023!2d106.8271!3d-6.2267!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e69f3e49051879b%3A0x9598992e3a6c988c!2sOne%20Satrio!5e0!3m2!1sen!2sid!4v1700000000002!5m2!1sen!2sid",
    tags: ["Garden View", "Outdoor Seating"],
    capacity: "60 Seating",
    vibe: "Urban Oasis"
  },
  { 
    id: 4, 
    name: "Central Market PIK", 
    region: "Jakarta Utara", 
    address: "Golf Island, Pantai Indah Kapuk, Jakarta Utara 14470", 
    phone: "+62 21 3950 1234", 
    hours: "10:00 AM - 10:00 PM",
    mapIframe: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3967.1111!2d106.7411!3d-6.0911!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e6a1d1d5187e59b%3A0x7798992e3a6c988c!2sCentral%20Market%20PIK!5e0!3m2!1sen!2sid!4v1700000000003!5m2!1sen!2sid",
    tags: ["Sea Breeze", "Takeaway Express"],
    capacity: "45 Seating",
    vibe: "Coastal Modern"
  },
  { 
    id: 5, 
    name: "Senayan City", 
    region: "Jakarta Pusat", 
    address: "Lower Ground, Crystal Lagoon, Jakarta Pusat 10270", 
    phone: "+62 21 7278 1234", 
    hours: "10:00 AM - 10:00 PM",
    mapIframe: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3966.3333!2d106.7972!3d-6.2272!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e69f1465187e59b%3A0x5598992e3a6c988c!2sSenayan%20City!5e0!3m2!1sen!2sid!4v1700000000004!5m2!1sen!2sid",
    tags: ["Urban Hangout", "After Hours"],
    capacity: "75 Seating",
    vibe: "Sleek Minimalist"
  }
];

// --- VARIAN ANIMASI KOMPLEKS ---

const FADE_IN_UP = {
  hidden: { opacity: 0, y: 40 },
  visible: (i) => ({
    opacity: 1, 
    y: 0, 
    transition: { 
      duration: 1.2, 
      delay: i * 0.1,
      ease: [0.16, 1, 0.3, 1] 
    } 
  })
};

const STAGGER_CONTAINER = {
  hidden: { opacity: 0 },
  visible: { 
    opacity: 1, 
    transition: { staggerChildren: 0.2, delayChildren: 0.3 } 
  }
};

const REVEAL_BOX = {
  hidden: { scaleX: 0 },
  visible: { 
    scaleX: 1, 
    transition: { duration: 1.5, ease: [0.77, 0, 0.175, 1] } 
  }
};

const PAGE_TRANSITION = {
  initial: { opacity: 0, y: 20 },
  animate: { opacity: 1, y: 0 },
  exit: { opacity: 0, y: -20 },
  transition: { duration: 0.8, ease: "easeInOut" }
};

// --- KOMPONEN PENDUKUNG (LUXURY INTERFACE) ---

/**
 * Efek Grainy Noise untuk tekstur premium
 */
const GrainyNoise = () => (
  <div className="fixed inset-0 z-[9999] pointer-events-none opacity-[0.04] mix-blend-overlay">
    <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
      <filter id="noise">
        <feTurbulence type="fractalNoise" baseFrequency="0.65" numOctaves="3" stitchTiles="stitch" />
      </filter>
      <rect width="100%" height="100%" filter="url(#noise)" />
    </svg>
  </div>
);

/**
 * Custom Cursor beranimasi
 */
const CustomCursor = () => {
  const [position, setPosition] = useState({ x: 0, y: 0 });
  const [isHovering, setIsHovering] = useState(false);

  useEffect(() => {
    const handleMove = (e) => setPosition({ x: e.clientX, y: e.clientY });
    const handleHover = () => setIsHovering(true);
    const handleLeave = () => setIsHovering(false);

    window.addEventListener('mousemove', handleMove);
    const interactiveElements = document.querySelectorAll('a, button, .interactive');
    interactiveElements.forEach(el => {
      el.addEventListener('mouseenter', handleHover);
      el.addEventListener('mouseleave', handleLeave);
    });

    return () => {
      window.removeEventListener('mousemove', handleMove);
      interactiveElements.forEach(el => {
        el.removeEventListener('mouseenter', handleHover);
        el.removeEventListener('mouseleave', handleLeave);
      });
    };
  }, []);

  return (
    <motion.div 
      className="fixed top-0 left-0 w-10 h-10 rounded-full border border-[#C5A059] pointer-events-none z-[10000] hidden lg:block mix-blend-difference"
      animate={{ 
        x: position.x - 20, 
        y: position.y - 20,
        scale: isHovering ? 2 : 1,
        backgroundColor: isHovering ? "rgba(197, 160, 89, 0.1)" : "transparent"
      }}
      transition={{ type: 'spring', stiffness: 400, damping: 28, mass: 0.5 }}
    />
  );
};

/**
 * Header Seksi dengan Deteksi Kontras
 */
const SectionHeading = ({ title, subtitle, light = false, align = "center" }) => {
  const ref = useRef(null);
  const isInView = useInView(ref, { once: true, margin: "-100px" });

  return (
    <div ref={ref} className={`mb-24 ${align === "center" ? "text-center" : "text-left"}`}>
      <motion.span 
        initial={{ opacity: 0, x: -20 }}
        animate={isInView ? { opacity: 1, x: 0 } : {}}
        transition={{ duration: 1 }}
        className={`text-[11px] uppercase tracking-[0.6em] font-bold block mb-6 ${light ? 'text-[#FAF9F6]/40' : 'text-[#C5A059]'}`}
      >
        {subtitle}
      </motion.span>
      <div className="relative inline-block">
        <motion.h2 
          initial={{ opacity: 0, y: 30 }}
          animate={isInView ? { opacity: 1, y: 0 } : {}}
          transition={{ duration: 1.2, delay: 0.2 }}
          className={`text-5xl md:text-8xl font-serif tracking-tighter leading-none ${light ? 'text-[#FAF9F6]' : 'text-[#121212]'}`}
        >
          {title}
        </motion.h2>
        <motion.div 
          initial={{ scaleX: 0 }}
          animate={isInView ? { scaleX: 1 } : {}}
          transition={{ duration: 1.8, delay: 0.6 }}
          className="h-[2px] w-32 bg-[#C5A059] mt-8 origin-left"
          style={{ margin: align === "center" ? "2rem auto 0" : "2rem 0 0" }}
        />
      </div>
    </div>
  );
};

/**
 * Tombol Premium dengan Magnetic Effect
 */
const PremiumButton = ({ children, variant = "gold", className = "", ...props }) => {
  const variants = {
    gold: "bg-[#C5A059] text-white border-[#C5A059]",
    outline: "border border-[#C5A059] text-[#C5A059] hover:bg-[#C5A059] hover:text-white",
    dark: "bg-[#121212] text-[#FAF9F6] border border-white/10 hover:border-[#C5A059]",
    light: "bg-white text-[#121212] hover:bg-[#FAF9F6]"
  };

  return (
    <motion.button 
      whileHover={{ scale: 1.02 }}
      whileTap={{ scale: 0.97 }}
      className={`px-12 py-6 text-[11px] uppercase tracking-[0.4em] font-bold transition-all duration-700 overflow-hidden group relative flex items-center justify-center gap-4 ${variants[variant]} ${className}`}
      {...props}
    >
      <span className="relative z-10">{children}</span>
      <div className="absolute inset-0 bg-white/10 translate-x-[-100%] group-hover:translate-x-0 transition-transform duration-700 ease-out" />
    </motion.button>
  );
};

// --- VIEW UTAMA (MODULAR PAGES) ---

/**
 * PAGE: HOME (The Experience)
 */
const HomeView = ({ onNavigate }) => {
  const heroRef = useRef(null);
  const { scrollYProgress } = useScroll({ target: heroRef });
  const yParallax = useTransform(scrollYProgress, [0, 1], [0, 300]);

  return (
    <div className="overflow-hidden">
      {/* Hero Masterpiece */}
      <section ref={heroRef} className="relative h-screen flex items-center justify-center bg-[#121212]">
        <motion.div style={{ y: yParallax }} className="absolute inset-0 z-0 opacity-40">
          <img 
            src="https://images.unsplash.com/photo-1555507036-ab1f4038808a?auto=format&fit=crop&q=80&w=2500" 
            className="w-full h-full object-cover grayscale" 
            alt="Bakerman Artisanal Hero" 
            onError={(e) => { e.target.src = "https://placehold.co/1920x1080/121212/C5A059?text=Artisanal+Soul"; }}
          />
        </motion.div>
        
        <div className="absolute inset-0 bg-gradient-to-b from-[#121212]/80 via-transparent to-[#121212]" />

        <div className="relative z-10 text-center px-6 max-w-7xl">
          <motion.div
            initial={{ opacity: 0, y: 80 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 1.5, ease: [0.16, 1, 0.3, 1] }}
          >
            <motion.span 
              initial={{ opacity: 0, tracking: '0.2em' }}
              animate={{ opacity: 1, tracking: '0.8em' }}
              transition={{ duration: 2, delay: 0.5 }}
              className="text-[#C5A059] uppercase text-xs font-bold mb-12 block"
            >
              Artisanal American Bakery • Jakarta Soul
            </motion.span>
            <h1 className="text-7xl md:text-[14vw] font-serif text-[#FAF9F6] leading-[0.75] tracking-tighter mb-16">
              Handcrafted<br />
              <motion.span 
                initial={{ opacity: 0, x: -60 }}
                animate={{ opacity: 1, x: 0 }}
                transition={{ duration: 1.8, delay: 0.8 }}
                className="italic text-[#C5A059]"
              >Patience.</motion.span>
            </h1>
            <p className="text-xl md:text-2xl text-white/50 max-w-3xl mx-auto mb-20 font-light leading-relaxed">
              Experience the meticulous 72-hour fermentation that defines our signature croissants. 
              Jakarta's urban heart meets traditional American craftsmanship.
            </p>
            <div className="flex flex-col sm:flex-row gap-10 justify-center items-center">
              <PremiumButton onClick={() => onNavigate('menu')}>Discover the Menu <ArrowRight size={18} /></PremiumButton>
              <button 
                onClick={() => onNavigate('story')}
                className="text-[11px] uppercase tracking-[0.5em] font-bold text-[#FAF9F6] hover:text-[#C5A059] transition-all py-6"
              >
                The Bakerman Story
              </button>
            </div>
          </motion.div>
        </div>

        <motion.div 
          animate={{ y: [0, 20, 0], opacity: [0.4, 1, 0.4] }} 
          transition={{ duration: 3, repeat: Infinity, ease: "easeInOut" }}
          className="absolute bottom-16 left-1/2 -translate-x-1/2 flex flex-col items-center gap-6 text-[#C5A059]"
        >
          <div className="w-[1px] h-32 bg-gradient-to-b from-[#C5A059] to-transparent" />
          <span className="text-[10px] uppercase tracking-[0.6em] font-bold">Scroll to Explore</span>
        </motion.div>
      </section>

      {/* The Craft (Story Section) */}
      <section className="py-56 px-6 bg-[#FAF9F6]">
        <div className="max-w-[1400px] mx-auto grid lg:grid-cols-12 gap-24 items-center">
          <div className="lg:col-span-5 relative">
            <motion.div 
              initial="hidden" whileInView="visible" viewport={{ once: true }}
              variants={REVEAL_BOX}
              className="absolute inset-0 bg-[#C5A059] z-10 origin-left"
            />
            <div className="relative overflow-hidden aspect-[4/5] shadow-2xl">
              <img 
                src="https://images.unsplash.com/photo-1544333303-5775ad11977a?auto=format&fit=crop&q=80&w=1500" 
                className="w-full h-full object-cover grayscale brightness-90 hover:grayscale-0 hover:scale-105 transition-all duration-[2s]" 
                alt="Bread Crafting" 
              />
            </div>
            <div className="absolute -bottom-16 -right-16 w-80 h-80 bg-[#121212] p-16 flex flex-col justify-center shadow-[40px_40px_80px_rgba(0,0,0,0.1)] z-20">
              <h4 className="text-[#C5A059] font-serif text-6xl mb-4 italic leading-none">72h</h4>
              <p className="text-white/40 text-[10px] uppercase tracking-[0.4em] font-bold leading-loose">
                Cold-fermentation process for complex aromatic profiles.
              </p>
            </div>
          </div>
          
          <div className="lg:col-span-7 lg:pl-20">
            <SectionHeading title="Patience is our Ingredient." subtitle="The Craftsmanship" align="left" />
            <div className="space-y-12">
              <p className="text-2xl font-light leading-relaxed text-[#121212]/80">
                At Bakerman, we don't believe in the fast-paced rush. We believe in the marriage of time and technique. Every pastry is a labor of love, requiring 72 hours of care before it meets the oven.
              </p>
              
              <div className="grid md:grid-cols-2 gap-12 pt-10">
                <div className="space-y-6 group">
                  <div className="w-16 h-16 bg-[#C5A059]/10 flex items-center justify-center text-[#C5A059] rounded-full group-hover:bg-[#C5A059] group-hover:text-white transition-all duration-500">
                    <ChefHat size={32} />
                  </div>
                  <h4 className="text-2xl font-serif">Artisanal Mastery</h4>
                  <p className="text-sm text-black/50 leading-relaxed font-light">Guided by world-class techniques, our bakers treat every dough as a living masterpiece.</p>
                </div>
                <div className="space-y-6 group">
                  <div className="w-16 h-16 bg-[#C5A059]/10 flex items-center justify-center text-[#C5A059] rounded-full group-hover:bg-[#C5A059] group-hover:text-white transition-all duration-500">
                    <Sparkles size={32} />
                  </div>
                  <h4 className="text-2xl font-serif">AOP Butter Grade</h4>
                  <p className="text-sm text-black/50 leading-relaxed font-light">Exclusively using the finest French AOP butter for that unparalleled golden flakiness.</p>
                </div>
              </div>
              
              <div className="pt-10">
                <PremiumButton variant="outline" onClick={() => onNavigate('story')}>Read Our Full History</PremiumButton>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Marquee Cinematic Banner */}
      <div className="bg-[#121212] py-12 border-y border-white/5 overflow-hidden whitespace-nowrap">
        <motion.div 
          animate={{ x: [0, -2500] }} 
          transition={{ duration: 50, repeat: Infinity, ease: "linear" }}
          className="flex gap-24 items-center"
        >
          {[...Array(12)].map((_, i) => (
            <React.Fragment key={i}>
              <span className="text-[#FAF9F6]/10 font-serif text-6xl uppercase italic tracking-widest">Freshly Baked Every Morning</span>
              <div className="w-4 h-4 bg-[#C5A059] rounded-full" />
              <span className="text-[#FAF9F6]/10 font-serif text-6xl uppercase italic tracking-widest">American Artisanal Heritage</span>
              <div className="w-4 h-4 bg-[#C5A059] rounded-full" />
            </React.Fragment>
          ))}
        </motion.div>
      </div>
    </div>
  );
};

/**
 * PAGE: DIGITAL MENU
 */
const MenuView = () => {
  const [activeTab, setActiveTab] = useState('pastries');

  const categories = [
    { id: 'pastries', label: 'Artisan Pastries', icon: <Croissant size={20} /> },
    { id: 'dining', label: 'All-Day Dining', icon: <Utensils size={20} /> },
    { id: 'beverages', label: 'Coffee & Brews', icon: <CoffeeIcon size={20} /> }
  ];

  return (
    <section className="pt-56 pb-56 px-6 bg-[#121212] min-h-screen">
      <div className="max-w-[1500px] mx-auto">
        <SectionHeading title="The Curated Collection." subtitle="Digital Menu" light={true} />
        
        {/* Advanced Tab Navigation */}
        <div className="flex flex-wrap justify-center gap-6 md:gap-16 mb-32">
          {categories.map(cat => (
            <button 
              key={cat.id}
              onClick={() => setActiveTab(cat.id)}
              className={`flex items-center gap-4 px-12 py-6 text-[11px] uppercase tracking-[0.6em] font-bold border rounded-full transition-all duration-700 ${
                activeTab === cat.id ? 'bg-[#C5A059] border-[#C5A059] text-white shadow-[0_20px_50px_rgba(197,160,89,0.3)]' : 'bg-transparent border-white/10 text-white/30 hover:border-white/30'
              }`}
            >
              {cat.icon}
              {cat.label}
            </button>
          ))}
        </div>

        <motion.div 
          layout
          key={activeTab}
          initial="hidden" animate="visible" variants={STAGGER_CONTAINER}
          className="grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-12"
        >
          <AnimatePresence mode="popLayout">
            {DETAILED_MENU[activeTab].map((item, idx) => (
              <motion.div 
                layout
                key={item.id}
                custom={idx}
                variants={FADE_IN_UP}
                className="group relative bg-[#1e1e1e] border border-white/5 overflow-hidden flex flex-col h-full hover:border-[#C5A059]/50 transition-all duration-700"
              >
                <div className="relative aspect-[4/5] overflow-hidden bg-[#121212]">
                  <motion.img 
                    whileHover={{ scale: 1.12 }}
                    transition={{ duration: 1.8 }}
                    src={item.img} 
                    className="w-full h-full object-cover grayscale opacity-80 group-hover:opacity-100 group-hover:grayscale-0 transition-all duration-1000" 
                    alt={item.name} 
                    onError={(e) => { e.target.src = `https://placehold.co/800x1000/121212/C5A059?text=${item.name}`; }}
                  />
                  {item.tags.length > 0 && (
                    <div className="absolute top-6 left-6 flex flex-col gap-2">
                      {item.tags.map(tag => (
                        <span key={tag} className="bg-[#C5A059] text-white px-4 py-1.5 text-[9px] font-bold tracking-[0.3em] uppercase shadow-2xl w-fit">
                          {tag}
                        </span>
                      ))}
                    </div>
                  )}
                  <div className="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                    <PremiumButton variant="light" className="scale-75 group-hover:scale-100">Quick Add</PremiumButton>
                  </div>
                </div>
                
                <div className="p-10 flex-grow flex flex-col">
                  <div className="flex justify-between items-start mb-6">
                    <h3 className="text-3xl font-serif text-[#FAF9F6] group-hover:text-[#C5A059] transition-colors duration-500">{item.name}</h3>
                    <span className="text-xl font-serif text-[#C5A059] ml-4">{item.price}</span>
                  </div>
                  <p className="text-base text-white/40 font-light leading-relaxed mb-10 flex-grow italic">
                    "{item.desc}"
                  </p>
                  <div className="pt-8 border-t border-white/5 flex justify-between items-center">
                    <div className="flex items-center gap-3 text-white/20">
                      <Zap size={14} className="text-[#C5A059]" />
                      <span className="text-[10px] uppercase tracking-widest font-bold">{item.calories}</span>
                    </div>
                    <button className="text-[#C5A059] hover:translate-x-3 transition-transform duration-500"><ArrowRight size={24} /></button>
                  </div>
                </div>
              </motion.div>
            ))}
          </AnimatePresence>
        </motion.div>

        <div className="mt-40 text-center">
          <p className="text-white/20 text-sm italic mb-12">*Prices are in IDR (thousands) and exclude Government Tax & Service Charge.</p>
          <div className="flex flex-wrap justify-center gap-8">
            <PremiumButton variant="outline">View Full Beverage List (PDF)</PremiumButton>
            <PremiumButton variant="outline">Pastry Box Customization</PremiumButton>
          </div>
        </div>
      </div>
    </section>
  );
};

/**
 * PAGE: LOCATIONS & INTERACTIVE MAP
 */
const LocationsView = () => {
  const [selectedBranch, setSelectedBranch] = useState(BRANCH_LOCATIONS[0]);
  const [regionFilter, setRegionFilter] = useState('All');

  const filteredBranches = useMemo(() => {
    if (regionFilter === 'All') return BRANCH_LOCATIONS;
    return BRANCH_LOCATIONS.filter(b => b.region === regionFilter);
  }, [regionFilter]);

  return (
    <section className="pt-56 pb-56 px-6 bg-[#FAF9F6] min-h-screen">
      <div className="max-w-[1700px] mx-auto">
        <SectionHeading title="Our Urban Sanctuaries." subtitle="Store Locator" />

        {/* Region Filter */}
        <div className="flex justify-center flex-wrap gap-4 mb-24">
          {['All', 'Jakarta Selatan', 'Jakarta Pusat', 'Jakarta Utara'].map(reg => (
            <button 
              key={reg}
              onClick={() => setRegionFilter(reg)}
              className={`px-10 py-3 rounded-full text-[10px] uppercase tracking-widest font-bold border transition-all duration-700 ${
                regionFilter === reg ? 'bg-[#121212] text-white border-[#121212]' : 'bg-transparent text-[#121212]/40 border-black/5 hover:border-[#C5A059]'
              }`}
            >
              {reg}
            </button>
          ))}
        </div>

        <div className="grid lg:grid-cols-12 gap-16 h-[850px]">
          {/* Branch List (Master) */}
          <div className="lg:col-span-4 overflow-y-auto pr-6 space-y-6 custom-scrollbar">
            {filteredBranches.map(branch => (
              <motion.div 
                key={branch.id}
                layout
                onClick={() => setSelectedBranch(branch)}
                className={`p-12 border transition-all duration-700 cursor-pointer group relative ${
                  selectedBranch.id === branch.id ? 'bg-[#121212] border-[#121212] shadow-2xl scale-[1.02]' : 'bg-white border-black/5 hover:border-[#C5A059]'
                }`}
              >
                {selectedBranch.id === branch.id && (
                  <motion.div layoutId="branchIndicator" className="absolute left-0 top-0 bottom-0 w-2 bg-[#C5A059]" />
                )}
                
                <div className="flex justify-between items-start mb-8">
                  <MapPin className={`${selectedBranch.id === branch.id ? 'text-[#C5A059]' : 'text-black/10'} group-hover:text-[#C5A059] transition-colors`} size={32} />
                  <div className="flex gap-3">
                    {branch.tags.slice(0, 1).map(t => (
                      <span key={t} className="text-[9px] uppercase tracking-widest px-3 py-1 bg-[#C5A059]/10 text-[#C5A059] font-bold">{t}</span>
                    ))}
                  </div>
                </div>
                
                <h3 className={`text-3xl font-serif mb-4 transition-colors ${selectedBranch.id === branch.id ? 'text-[#FAF9F6]' : 'text-[#121212]'}`}>
                  {branch.name}
                </h3>
                <p className={`text-base mb-8 font-light leading-relaxed transition-colors ${selectedBranch.id === branch.id ? 'text-[#FAF9F6]/50' : 'text-black/50'}`}>
                  {branch.address}
                </p>
                <div className={`flex items-center gap-4 text-xs font-bold tracking-[0.3em] uppercase transition-colors ${selectedBranch.id === branch.id ? 'text-[#C5A059]' : 'text-[#121212]/20'}`}>
                  Explore Detail <ArrowRight size={16} className="group-hover:translate-x-4 transition-transform" />
                </div>
              </motion.div>
            ))}
          </div>

          {/* Map & Detail (Detail) */}
          <div className="lg:col-span-8 bg-white border border-black/5 overflow-hidden flex flex-col shadow-2xl relative">
            <AnimatePresence mode="wait">
              <motion.div 
                key={selectedBranch.id}
                initial={{ opacity: 0 }} 
                animate={{ opacity: 1 }} 
                exit={{ opacity: 0 }}
                transition={{ duration: 0.8 }}
                className="flex-grow relative bg-[#f1f1f1]"
              >
                <iframe 
                  src={selectedBranch.mapIframe}
                  className="absolute inset-0 w-full h-full border-0 grayscale contrast-125 opacity-70"
                  allowFullScreen="" 
                  loading="lazy" 
                  title={selectedBranch.name}
                />
                <div className="absolute inset-0 pointer-events-none shadow-[inset_0_0_150px_rgba(0,0,0,0.1)]" />
              </motion.div>
            </AnimatePresence>
            
            <div className="p-16 bg-[#121212] text-[#FAF9F6] grid md:grid-cols-2 gap-16 relative">
              <div className="space-y-10">
                <h4 className="text-[#C5A059] uppercase tracking-[0.5em] text-[11px] font-bold">Store Details</h4>
                <div className="grid gap-10">
                  <div className="flex items-center gap-6 group">
                    <div className="p-4 bg-white/5 rounded-full text-[#C5A059] group-hover:bg-[#C5A059] group-hover:text-white transition-colors duration-500">
                      <Clock size={24} />
                    </div>
                    <div>
                      <p className="text-[10px] uppercase tracking-widest text-white/30 mb-1">Operating Hours</p>
                      <p className="text-xl font-serif">{selectedBranch.hours}</p>
                    </div>
                  </div>
                  <div className="flex items-center gap-6 group">
                    <div className="p-4 bg-white/5 rounded-full text-[#C5A059] group-hover:bg-[#C5A059] group-hover:text-white transition-colors duration-500">
                      <Phone size={24} />
                    </div>
                    <div>
                      <p className="text-[10px] uppercase tracking-widest text-white/30 mb-1">Concierge Phone</p>
                      <p className="text-xl font-serif">{selectedBranch.phone}</p>
                    </div>
                  </div>
                </div>
              </div>
              
              <div className="flex flex-col justify-between">
                <div>
                  <h4 className="text-[#C5A059] uppercase tracking-[0.5em] text-[11px] font-bold mb-8">Branch Features</h4>
                  <div className="flex flex-wrap gap-3 mb-10">
                    <span className="px-4 py-2 border border-white/10 text-white/40 text-[10px] uppercase tracking-widest font-bold">{selectedBranch.capacity}</span>
                    <span className="px-4 py-2 border border-white/10 text-white/40 text-[10px] uppercase tracking-widest font-bold">{selectedBranch.vibe}</span>
                    {selectedBranch.tags.map(tag => (
                      <span key={tag} className="px-4 py-2 border border-[#C5A059]/30 text-[#C5A059] text-[10px] uppercase tracking-widest font-bold">{tag}</span>
                    ))}
                  </div>
                </div>
                <PremiumButton className="w-full">
                  Get Navigation Directions <Navigation size={18} />
                </PremiumButton>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  );
};

// --- APLIKASI UTAMA (APP) ---

export default function App() {
  const [currentPage, setCurrentPage] = useState('home');
  const [isScrolled, setIsScrolled] = useState(false);
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [isLoading, setIsLoading] = useState(true);

  // Optimasi Kontras Header
  useEffect(() => {
    const handleScroll = () => {
      setIsScrolled(window.scrollY > 100);
    };
    window.addEventListener('scroll', handleScroll);
    
    // Simulasi loading mewah dengan progres
    const timer = setTimeout(() => setIsLoading(false), 2800);
    
    return () => {
      window.removeEventListener('scroll', handleScroll);
      clearTimeout(timer);
    };
  }, []);

  // Smooth Scroll ke atas saat ganti halaman
  useEffect(() => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }, [currentPage]);

  const handleNavigation = (page) => {
    setCurrentPage(page);
    setIsMenuOpen(false);
  };

  // Navigasi Link Array
  const navLinks = [
    { id: 'home', label: 'Experience' },
    { id: 'story', label: 'The Craft' },
    { id: 'menu', label: 'The Menu' },
    { id: 'locations', label: 'Our Stores' }
  ];

  if (isLoading) {
    return (
      <div className="fixed inset-0 z-[10000] bg-[#121212] flex flex-col items-center justify-center">
        <motion.div 
          initial={{ opacity: 0, scale: 0.9 }}
          animate={{ opacity: 1, scale: 1 }}
          className="text-center"
        >
          <div className="text-8xl font-serif text-[#FAF9F6] mb-12 flex items-center gap-4">
            B<motion.span 
              animate={{ opacity: [0, 1, 0] }}
              transition={{ duration: 1.5, repeat: Infinity }}
              className="text-[#C5A059]"
            >.</motion.span>
          </div>
          <div className="w-64 h-[2px] bg-white/5 relative overflow-hidden mx-auto">
            <motion.div 
              initial={{ x: "-100%" }}
              animate={{ x: "100%" }}
              transition={{ duration: 2.5, repeat: Infinity, ease: "linear" }}
              className="absolute inset-0 bg-[#C5A059] w-2/3"
            />
          </div>
          <p className="mt-12 text-[11px] uppercase tracking-[1em] text-white/30 font-bold">Artisanal Patience</p>
        </motion.div>
      </div>
    );
  }

  return (
    <div className="relative selection:bg-[#C5A059] selection:text-white bg-[#FAF9F6]">
      <GrainyNoise />
      <CustomCursor />

      {/* --- PREMIUM DYNAMIC HEADER --- */}
      <header 
        className={`fixed top-0 left-0 w-full z-50 transition-all duration-[0.8s] px-8 md:px-20 ${
          isScrolled || isMenuOpen ? 'py-6 bg-[#121212]/95 backdrop-blur-xl shadow-2xl border-b border-white/5' : 'py-12 bg-transparent'
        }`}
      >
        <div className="max-w-[1900px] mx-auto flex justify-between items-center">
          {/* Brand Logo */}
          <motion.div 
            onClick={() => handleNavigation('home')}
            className="flex items-center gap-6 cursor-pointer group"
          >
            <div className="w-14 h-14 bg-[#C5A059] flex items-center justify-center text-white font-serif text-4xl group-hover:scale-110 transition-all duration-700 shadow-xl">B</div>
            <div className="overflow-hidden h-10">
              <span className={`text-3xl font-serif tracking-tighter transition-all duration-700 block ${
                isScrolled || isMenuOpen || currentPage !== 'home' ? 'text-[#FAF9F6]' : 'text-[#FAF9F6]'
              }`}>
                BAKERMAN
              </span>
            </div>
          </motion.div>

          {/* Desktop Navigation */}
          <nav className="hidden lg:flex items-center gap-16">
            {navLinks.map(link => (
              <button 
                key={link.id}
                onClick={() => handleNavigation(link.id)}
                className={`text-[11px] uppercase tracking-[0.5em] font-bold transition-all duration-700 relative group py-4 ${
                  currentPage === link.id ? 'text-[#C5A059]' : 'text-white/40 hover:text-white'
                }`}
              >
                {link.label}
                <motion.span 
                  className={`absolute -bottom-1 left-0 h-[2px] bg-[#C5A059] transition-all duration-700 ${
                    currentPage === link.id ? 'w-full' : 'w-0 group-hover:w-full'
                  }`} 
                />
              </button>
            ))}
            <PremiumButton 
              className="px-10 py-4 bg-[#FAF9F6] text-[#121212] border-none text-[9px] hover:bg-[#C5A059] hover:text-white transition-all"
              onClick={() => handleNavigation('menu')}
            >
              Order Online
            </PremiumButton>
          </nav>

          {/* Mobile Navigation Toggle */}
          <button 
            className={`lg:hidden p-4 rounded-full transition-all duration-700 ${isScrolled ? 'text-white' : 'text-white'}`} 
            onClick={() => setIsMenuOpen(!isMenuOpen)}
          >
            {isMenuOpen ? <X size={36} /> : <MenuIcon size={36} />}
          </button>
        </div>

        {/* Fullscreen Mobile Menu Drawer */}
        <AnimatePresence>
          {isMenuOpen && (
            <motion.div 
              initial={{ opacity: 0, x: "100%" }} 
              animate={{ opacity: 1, x: 0 }} 
              exit={{ opacity: 0, x: "100%" }}
              transition={{ type: 'spring', damping: 30, stiffness: 200 }}
              className="fixed inset-0 top-[88px] bg-[#121212] z-[40] lg:hidden flex flex-col p-16 gap-12 overflow-y-auto"
            >
              {navLinks.map((link, idx) => (
                <motion.button 
                  key={link.id}
                  initial={{ opacity: 0, x: 30 }}
                  animate={{ opacity: 1, x: 0 }}
                  transition={{ delay: idx * 0.1 }}
                  onClick={() => handleNavigation(link.id)}
                  className={`text-7xl font-serif text-left tracking-tighter ${
                    currentPage === link.id ? 'text-[#C5A059]' : 'text-white/20 hover:text-white transition-all'
                  }`}
                >
                  {link.label}
                </motion.button>
              ))}
              <div className="mt-auto pt-16 border-t border-white/5 flex flex-col gap-10">
                <div className="flex gap-12">
                  <div className="space-y-4">
                    <p className="text-[#C5A059] text-[10px] uppercase tracking-[0.4em] font-bold">Inquiries</p>
                    <p className="text-white/40 text-lg font-light">info@bakerman.co.id</p>
                  </div>
                  <div className="space-y-4">
                    <p className="text-[#C5A059] text-[10px] uppercase tracking-[0.4em] font-bold">Socials</p>
                    <p className="text-white/40 text-lg font-light">@bakerman.id</p>
                  </div>
                </div>
                <PremiumButton className="w-full">Order Online Now</PremiumButton>
              </div>
            </motion.div>
          )}
        </AnimatePresence>
      </header>

      {/* --- CONTENT ENGINE --- */}
      <main>
        <AnimatePresence mode="wait">
          <motion.div
            key={currentPage}
            {...PAGE_TRANSITION}
          >
            {currentPage === 'home' && <HomeView onNavigate={handleNavigation} />}
            {currentPage === 'menu' && <MenuView />}
            {currentPage === 'locations' && <LocationsView />}
            {currentPage === 'story' && (
              <div className="pt-56 pb-56 px-6 bg-[#121212] min-h-screen">
                <div className="max-w-6xl mx-auto">
                   <SectionHeading title="Chapter of Passion." subtitle="The Story" light />
                   <div className="grid md:grid-cols-2 gap-32 items-center mb-56">
                      <div className="space-y-12">
                        <span className="text-7xl font-serif text-[#C5A059] block italic opacity-20">01</span>
                        <h3 className="text-5xl font-serif text-[#FAF9F6] tracking-tighter">Artisan Roots.</h3>
                        <p className="text-white/40 text-xl font-light leading-relaxed">
                          Bakerman was founded in 2020 with a single vision: to bring the authentic American artisanal bakery culture to Jakarta's urban scene. We don't just bake; we craft emotions.
                        </p>
                      </div>
                      <div className="aspect-square bg-white/5 overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1555507036-ab1f4038808a" className="w-full h-full object-cover grayscale opacity-60" alt="Bakery history" />
                      </div>
                   </div>
                   <div className="grid md:grid-cols-2 gap-32 items-center">
                      <div className="order-2 md:order-1 aspect-square bg-white/5 overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1509440159596-0249088772ff" className="w-full h-full object-cover grayscale opacity-60" alt="Bakery dough" />
                      </div>
                      <div className="order-1 md:order-2 space-y-12">
                        <span className="text-7xl font-serif text-[#C5A059] block italic opacity-20">02</span>
                        <h3 className="text-5xl font-serif text-[#FAF9F6] tracking-tighter">The Science of Time.</h3>
                        <p className="text-white/40 text-xl font-light leading-relaxed">
                          Our cold-fermentation process lasts exactly 72 hours. This isn't a marketing choice—it's a chemical necessity to develop the deep, complex acids and airy structure that define our bread.
                        </p>
                        <div className="flex gap-16">
                           <div>
                              <p className="text-4xl text-[#C5A059] font-serif mb-2">81</p>
                              <p className="text-[10px] uppercase tracking-widest text-white/20">Layers of Dough</p>
                           </div>
                           <div>
                              <p className="text-4xl text-[#C5A059] font-serif mb-2">12k+</p>
                              <p className="text-[10px] uppercase tracking-widest text-white/20">Daily Bakes</p>
                           </div>
                        </div>
                      </div>
                   </div>
                </div>
              </div>
            )}
          </motion.div>
        </AnimatePresence>
      </main>

      {/* --- GLOBAL SECTIONS (SHARES ACROSS PAGES) --- */}
      
      {/* Digital Concierge Ordering */}
      <section className="py-56 bg-[#121212] overflow-hidden border-t border-white/5">
        <div className="max-w-[1500px] mx-auto px-6 grid lg:grid-cols-2 gap-40 items-center">
          <div>
            <SectionHeading title="Seamless Indulgence." subtitle="The Concierge" light align="left" />
            <p className="text-white/40 text-2xl font-light leading-relaxed mb-20 max-w-2xl">
              Elevate your morning rituals or corporate gatherings with our artisanal collection. Available for instant delivery or bespoke catering inquiries.
            </p>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              {[
                { name: "GoFood", color: "bg-[#00AA13]", icon: <Smartphone size={24} />, desc: "Instant Delivery" },
                { name: "GrabFood", color: "bg-[#00B14F]", icon: <Smartphone size={24} />, desc: "Fast Preferred" },
                { name: "Tokopedia", color: "bg-[#03AC0E]", icon: <Package size={24} />, desc: "Hampers & Gift Sets" },
                { name: "Catering", color: "bg-[#C5A059]", icon: <Phone size={24} />, desc: "Corporate & Private Events" }
              ].map(item => (
                <motion.div 
                  key={item.name}
                  whileHover={{ scale: 1.05, backgroundColor: "rgba(255,255,255,0.05)" }}
                  className="p-10 border border-white/5 flex items-center justify-between group cursor-pointer transition-all duration-700"
                >
                  <div className="flex flex-col gap-2">
                    <span className="text-[#FAF9F6] font-serif text-2xl">{item.name}</span>
                    <span className="text-[9px] uppercase tracking-widest text-white/20 font-bold">{item.desc}</span>
                  </div>
                  <div className={`${item.color} w-14 h-14 rounded-full flex items-center justify-center text-white shadow-xl`}>{item.icon}</div>
                </motion.div>
              ))}
            </div>
          </div>
          <div className="relative rounded-[5rem] overflow-hidden shadow-[0_50px_100px_rgba(0,0,0,0.5)] group">
            <img 
              src="https://images.unsplash.com/photo-1574362848149-11496d93a7c7?auto=format&fit=crop&q=80&w=1500" 
              className="w-full h-full object-cover grayscale brightness-[0.3] group-hover:grayscale-0 group-hover:brightness-50 transition-all duration-[2s]" 
              alt="Concierge delivery" 
            />
            <div className="absolute inset-0 flex flex-col items-center justify-center gap-10">
              <motion.div 
                animate={{ scale: [1, 1.1, 1] }}
                transition={{ duration: 2, repeat: Infinity }}
                className="w-32 h-32 bg-[#C5A059] rounded-full flex items-center justify-center text-white cursor-pointer"
              >
                <Play size={48} fill="currentColor" className="ml-2" />
              </motion.div>
              <p className="text-white text-[11px] uppercase tracking-[0.8em] font-bold">Watch the Craft</p>
            </div>
          </div>
        </div>
      </section>

      {/* Urban Life Instagram Gallery */}
      <section className="py-56 px-6 bg-[#FAF9F6] border-t border-black/5">
        <div className="max-w-[1900px] mx-auto">
          <div className="flex flex-col md:flex-row justify-between items-end mb-32 gap-16">
            <div className="text-left">
              <span className="text-[#C5A059] uppercase tracking-[0.6em] text-[11px] font-bold mb-6 block">Join the Culture</span>
              <h2 className="text-6xl md:text-9xl font-serif leading-none tracking-tighter italic">@Bakerman.id</h2>
            </div>
            <PremiumButton variant="outline" className="rounded-full px-16">Follow Our Gallery <Instagram size={24} /></PremiumButton>
          </div>
          <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4">
            {[...Array(6)].map((_, i) => (
              <motion.div 
                key={i}
                whileHover={{ scale: 0.96 }}
                className="aspect-square bg-[#121212] overflow-hidden group cursor-pointer shadow-2xl"
              >
                <img 
                  src={`https://images.unsplash.com/photo-${1500000000000 + (i * 12345678)}?auto=format&fit=crop&q=80&w=1000`} 
                  className="w-full h-full object-cover grayscale opacity-50 group-hover:opacity-100 group-hover:grayscale-0 transition-all duration-[1.5s]" 
                  alt={`Social post ${i}`} 
                  onError={(e) => { e.target.src = "https://placehold.co/800x800/121212/C5A059?text=Bakerman+Life"; }}
                />
              </motion.div>
            ))}
          </div>
        </div>
      </section>

      {/* --- MEGA FOOTER --- */}
      <footer className="bg-[#121212] pt-56 pb-24 px-8 md:px-20 border-t border-white/5 relative overflow-hidden">
        {/* Cinematic Watermark Background */}
        <div className="absolute -bottom-20 -right-20 text-[28vw] font-serif text-white/[0.02] select-none pointer-events-none uppercase tracking-tighter">Bakerman</div>

        <div className="max-w-[1900px] mx-auto relative z-10">
          <div className="grid lg:grid-cols-12 gap-24 mb-56">
            {/* Column 1: Brand Info */}
            <div className="lg:col-span-5 space-y-16">
              <div className="flex items-center gap-8">
                <div className="w-20 h-20 bg-[#C5A059] flex items-center justify-center text-white font-serif text-5xl shadow-2xl">B</div>
                <span className="text-5xl font-serif text-[#FAF9F6] tracking-tighter uppercase">BAKERMAN</span>
              </div>
              <p className="text-3xl text-white/30 font-light leading-relaxed max-w-xl italic">
                Artisanal American Bakery & Urban Cafe. Defining Jakarta's morning rituals since 2020.
              </p>
              <div className="flex gap-12">
                {[Instagram, FbIcon, Twitter, Mail].map((Icon, idx) => (
                  <a key={idx} href="#" className="text-white/20 hover:text-[#C5A059] transition-all duration-700 transform hover:-translate-y-4">
                    <Icon size={32} />
                  </a>
                ))}
              </div>
            </div>

            {/* Column 2: Navigation */}
            <div className="lg:col-span-2">
              <h5 className="text-[#C5A059] text-[11px] uppercase tracking-[0.6em] font-bold mb-16 underline underline-offset-[20px] decoration-white/10">Navigation</h5>
              <ul className="space-y-8">
                {['The Craft', 'The Collection', 'Store Locator', 'Bakerman Career', 'Investor Relations'].map(item => (
                  <li key={item}>
                    <button className="text-white/40 hover:text-[#FAF9F6] text-sm font-light transition-all tracking-widest uppercase flex items-center gap-4 group">
                      <div className="w-4 h-[1px] bg-[#C5A059] scale-x-0 group-hover:scale-x-100 transition-transform origin-left" />
                      {item}
                    </button>
                  </li>
                ))}
              </ul>
            </div>

            {/* Column 3: Contact/B2B */}
            <div className="lg:col-span-2">
              <h5 className="text-[#C5A059] text-[11px] uppercase tracking-[0.6em] font-bold mb-16 underline underline-offset-[20px] decoration-white/10">Support</h5>
              <ul className="space-y-8">
                {['Catering Concierge', 'Corporate Gifting', 'Hamper Customization', 'Sustainability', 'FAQ'].map(item => (
                  <li key={item}>
                    <a href="#" className="text-white/40 hover:text-[#FAF9F6] text-sm font-light transition-all tracking-widest uppercase">{item}</a>
                  </li>
                ))}
              </ul>
            </div>

            {/* Column 4: Newsletter Subscription */}
            <div className="lg:col-span-3">
              <h5 className="text-[#C5A059] text-[11px] uppercase tracking-[0.6em] font-bold mb-16 underline underline-offset-[20px] decoration-white/10">Bakerman Circle</h5>
              <p className="text-white/30 text-sm font-light mb-12 italic leading-relaxed">Join our inner circle for priority access to seasonal drops and artisanal tasting events.</p>
              <div className="relative">
                <input 
                  type="email" 
                  placeholder="Email Address" 
                  className="w-full bg-transparent border-b border-white/10 py-6 outline-none text-[#FAF9F6] focus:border-[#C5A059] transition-all text-base font-light placeholder:text-white/10"
                />
                <button className="absolute right-0 top-1/2 -translate-y-1/2 text-[#C5A059] hover:translate-x-4 transition-transform duration-700">
                  <ArrowRight size={32} />
                </button>
              </div>
              <div className="mt-12 flex items-center gap-4 text-[10px] text-white/10 uppercase tracking-widest">
                <ShieldCheck size={16} />
                <span>Encrypted & Private</span>
              </div>
            </div>
          </div>

          {/* Legal Bar */}
          <div className="pt-24 border-t border-white/5 flex flex-col md:flex-row justify-between items-center gap-12 text-[10px] uppercase tracking-[0.5em] font-bold text-white/10">
            <div className="space-y-4 text-center md:text-left">
              <p>© 2026 Bakerman Artisanal Bakery. A Division of Urban Global Group.</p>
              <p>Handcrafted in Jakarta, Indonesia with Soul.</p>
            </div>
            <div className="flex flex-col md:flex-row gap-12 items-center">
              <div className="flex gap-12">
                <a href="#" className="hover:text-white transition-colors">Privacy</a>
                <a href="#" className="hover:text-white transition-colors">Terms</a>
                <a href="#" className="hover:text-white transition-colors">Cookies</a>
              </div>
              <div className="w-[1px] h-12 bg-white/5 hidden md:block" />
              <div className="text-right flex flex-col items-center md:items-end">
                <p className="mb-2">Concept by <span className="text-[#C5A059]">Lavirix Design</span></p>
                <div className="flex gap-3 items-center">
                   <div className="w-3 h-3 bg-green-500/20 rounded-full animate-pulse" />
                   <span className="text-[8px] text-white/5">System Operational</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </footer>
    </div>
  );
}

/**
 * GLOBAL CUSTOM STYLES (Tailwind Global Injection)
 * ===============================================
 */
const globalStyleTag = `
  @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;700&display=swap');
  
  body {
    background-color: #FAF9F6;
    font-family: 'Inter', sans-serif;
    overflow-x: hidden;
    color: #121212;
  }

  .font-serif {
    font-family: 'Playfair Display', serif;
  }

  .custom-scrollbar::-webkit-scrollbar {
    width: 2px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.05);
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: #C5A059;
  }

  /* Custom Transitions */
  .ease-expo {
    transition-timing-function: cubic-bezier(0.16, 1, 0.3, 1);
  }

  /* Selection Color */
  ::selection {
    background-color: #C5A059;
    color: #FAF9F6;
  }

  /* Iframe Grayscale Map */
  iframe {
    filter: grayscale(1) invert(0.05) contrast(1.2) brightness(0.9);
  }
`;

// Inject global styles
if (typeof document !== 'undefined') {
  const style = document.createElement("style");
  style.innerText = globalStyleTag;
  document.head.appendChild(style);
}

